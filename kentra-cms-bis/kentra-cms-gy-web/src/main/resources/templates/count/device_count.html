<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>5.8G设备统计</title>
    <link rel="stylesheet" href="../layui/css/layui.css" media="all"/>
    <script type="text/javascript" src="../layui/layui.js"></script>
    <script type="text/javascript" src="../js/utils/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="../js/count/deviceCount.js"></script>
    <!-- 引入 ECharts 文件 -->
    <script src="../echart/echarts.min.js"></script>
</head>
<body class="childrenBody" style="padding: 0 0 0 30px;background-color: white">
<div>
    <!--搜索-->
    <!--<div style="padding-top: 7px;padding-right: 10px">-->
    <!--<div class="layui-input-inline">-->
    <!--<div style="display: inline-block;">-->
    <!--<span style="font-size: 16px;">设备名称:</span>-->
    <!--<div class="layui-input-inline">-->
    <!--<input type="text" id="searchParam" placeholder="请输入设备名称" style="border-radius:6px;height: 16px;">-->
    <!--</div>-->
    <!--</div>-->
    <!--<button class="btn btn-xs btn-primary" style="float:right;width: 80px;margin-right: 40px" id="searchBtn">-->
    <!--<i class="icon-search bigger-130"></i>-->
    <!--<span class="bigger-130 no-text-shadow">搜索</span>-->
    <!--</button>-->
    <!--</div>-->
    <!--</div>-->
</div>

<!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
<div id="speedChartMain" style="width: 95%; height: 473px;padding-top: 45px"></div>
</body>
<script>
    var list = [];
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('speedChartMain'));
    $(document).ready(function () {
        $.ajax({
            url: '/equip/device/deviceCount',
            type: "post",
            data: {"year": "2018"},//目前暂时没有搜索功能，所以这里可以不用管
            dataType: "json",
            async: false,
            success: function (result) {
                list = result.result;
            }
        });
        var option = {
            title: {
                text: '贵阳环高采集设备统计',
                right: 'center',
                top:'93%'
            },
            legend: {data: ['未启用', '正常', '故障', '维修中']},
            tooltip: {trigger: 'axis', axisPointer: {type: 'shadow'}},
            grid: {//设置位置
                // left: '4%', right: '6%', bottom: '3%', top: '18%', containLabel: true
                x:80,
                x2:110,
                y:100,
                height:320
            },
            toolbox: {
                itemSize:20,
                itemGap:20,
                show: true,//是否显示
                orient: 'horizontal', //横向展示
                left: '18',
                top: '9',
                feature: {
                    mark: {show: true},
                    // dataView: {
                    //     show: true,
                    //     readOnly: true,
                    //     lang:['5.8G设备统计表格', '关闭'],
                    //     optionToContent: function (opt) {
                    //         var axisData = opt.xAxis[0].data; //坐标数据
                    //         var series = opt.series; //折线图数据
                    //         var tdHeads = '<td  style="padding: 0 10px">状态</td>'; //表头
                    //         var tdBodys = ''; //数据
                    //         series.forEach(function (item) {
                    //             //组装表头
                    //             tdHeads += '<td style="padding: 0 10px">'+item.name+'</td>';
                    //         });
                    //         var table = '<table border="1" style="margin-left:20px;border-collapse:collapse;font-size:14px;text-align:center"><tbody><tr>'+tdHeads+'</tr>';
                    //         for (var i = 0, l = axisData.length; i < l; i++) {
                    //             for (var j = 0; j < series.length; j++) {
                    //                 //组装表数据
                    //                 tdBodys += '<td>'+series[j].data[i]+'</td>';
                    //             }
                    //             table += '<tr><td style="padding: 0 10px">'+axisData[i]+'</td>'+tdBodys+'</tr>';
                    //             tdBodys = '';
                    //         }
                    //         table += '</tbody></table>';
                    //         return table;
                    //     }
                    // },//数据视图
                    magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},//切换
                    restore: {show: true},//重置
                    saveAsImage: {show: true}//下载
                }
            },
            xAxis: {
                name: 'X(状态)',
                type: 'category',
                boundaryGap: true,//data数据显示位置
                data: ['未启用', '正常', '故障', '维修中']
            },
            yAxis: [{
                name: 'Y(数量)',
                type: 'value',
                splitArea: {show: true}
            }],
            series: [{
                name: '个数',
                type: 'bar',
                barWidth: 120,
                data: list,
                itemStyle: {   //配置样式，设置每个柱子的颜色
                    normal: {
                        color: function (params) {
                            var colorList = ['#FFFF00', 'green', 'blue', 'red'];
                            return colorList[params.dataIndex];
                        }
                    }
                },
                label: {
                    show: true,
                    position: 'top',
                    textStyle: {
                        color: 'black'
                    }
                }
            }]
        };
        myChart.setOption(option);
    });
</script>
</html>