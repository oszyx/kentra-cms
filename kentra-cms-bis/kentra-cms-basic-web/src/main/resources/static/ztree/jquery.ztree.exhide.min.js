/*
 * JQuery zTree exHideNodes v3.5.28
 * http://treejs.cn/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2017-01-20
 */(function(k){k.extend(!0,k.fn.zTree._z,{view:{clearOldFirstNode:function(c,a){for(var b=a.getNextNode();b;){if(b.isFirstNode){b.isFirstNode=!1;d.setNodeLineIcos(c,b);break}if(b.isLastNode)break;b=b.getNextNode()}},clearOldLastNode:function(c,a,b){for(a=a.getPreNode();a;){if(a.isLastNode){a.isLastNode=!1;b&&d.setNodeLineIcos(c,a);break}if(a.isFirstNode)break;a=a.getPreNode()}},makeDOMNodeMainBefore:function(c,a,b){c.push("\x3cli ",b.isHidden?"style\x3d'display:none;' ":"","id\x3d'",b.tId,"' class\x3d'",n.className.LEVEL,b.level,"' tabindex\x3d'0' hidefocus\x3d'true' treenode\x3e")},showNode:function(c,a,b){a.isHidden=!1;f.initShowForExCheck(c,a);l(a,c).show()},showNodes:function(c,a,b){if(a&&0!=a.length){var e={},g,m;g=0;for(m=a.length;g<m;g++){var h=a[g];if(!e[h.parentTId]){var k=h.getParentNode();e[h.parentTId]=null===k?f.getRoot(c):h.getParentNode()}d.showNode(c,h,b)}for(var l in e)a=e[l][c.data.key.children],d.setFirstNodeForShow(c,a),d.setLastNodeForShow(c,a)}},hideNode:function(c,a,b){a.isHidden=!0;a.isFirstNode=!1;a.isLastNode=!1;f.initHideForExCheck(c,a);d.cancelPreSelectedNode(c,a);l(a,c).hide()},hideNodes:function(c,a,b){if(a&&0!=a.length){var e={},g,m;g=0;for(m=a.length;g<m;g++){var h=a[g];if((h.isFirstNode||h.isLastNode)&&!e[h.parentTId]){var k=h.getParentNode();e[h.parentTId]=null===k?f.getRoot(c):h.getParentNode()}d.hideNode(c,h,b)}for(var l in e)a=e[l][c.data.key.children],d.setFirstNodeForHide(c,a),d.setLastNodeForHide(c,a)}},setFirstNode:function(c,a){var b=c.data.key.children,e=a[b].length;0<e&&!a[b][0].isHidden?a[b][0].isFirstNode=!0:0<e&&d.setFirstNodeForHide(c,a[b])},setLastNode:function(c,a){var b=c.data.key.children,e=a[b].length;0<e&&!a[b][0].isHidden?a[b][e-1].isLastNode=!0:0<e&&d.setLastNodeForHide(c,a[b])},setFirstNodeForHide:function(c,a){var b,e,g;e=0;for(g=a.length;e<g;e++){b=a[e];if(b.isFirstNode)break;if(b.isHidden||b.isFirstNode)b=null;else{b.isFirstNode=!0;d.setNodeLineIcos(c,b);break}}return b},setFirstNodeForShow:function(c,a){var b,e,g,f,h;e=0;for(g=a.length;e<g;e++)if(b=a[e],!f&&!b.isHidden&&b.isFirstNode){f=b;break}else if(!f&&!b.isHidden&&!b.isFirstNode)b.isFirstNode=!0,f=b,d.setNodeLineIcos(c,b);else if(f&&b.isFirstNode){b.isFirstNode=!1;h=b;d.setNodeLineIcos(c,b);break}return{"new":f,old:h}},setLastNodeForHide:function(c,a){var b,e;for(e=a.length-1;0<=e;e--){b=a[e];if(b.isLastNode)break;if(b.isHidden||b.isLastNode)b=null;else{b.isLastNode=!0;d.setNodeLineIcos(c,b);break}}return b},setLastNodeForShow:function(c,a){var b,e,g,f;for(e=a.length-1;0<=e;e--)if(b=a[e],!g&&!b.isHidden&&b.isLastNode){g=b;break}else if(!g&&!b.isHidden&&!b.isLastNode)b.isLastNode=!0,g=b,d.setNodeLineIcos(c,b);else if(g&&b.isLastNode){b.isLastNode=!1;f=b;d.setNodeLineIcos(c,b);break}return{"new":g,old:f}}},data:{initHideForExCheck:function(c,a){a.isHidden&&c.check&&c.check.enable&&("undefined"==typeof a._nocheck&&(a._nocheck=!!a.nocheck,a.nocheck=!0),a.check_Child_State=-1,d.repairParentChkClassWithSelf&&d.repairParentChkClassWithSelf(c,a))},initShowForExCheck:function(c,a){if(!a.isHidden&&c.check&&c.check.enable){"undefined"!=typeof a._nocheck&&(a.nocheck=a._nocheck,delete a._nocheck);if(d.setChkClass){var b=l(a,n.id.CHECK,c);d.setChkClass(c,b,a)}d.repairParentChkClassWithSelf&&d.repairParentChkClassWithSelf(c,a)}}}});k=k.fn.zTree;var p=k._z.tools,n=k.consts,d=k._z.view,f=k._z.data,l=p.$;f.addInitNode(function(c,a,b,e,d,k,h){"string"==typeof b.isHidden&&(b.isHidden=p.eqs(b.isHidden,"true"));b.isHidden=!!b.isHidden;f.initHideForExCheck(c,b)});f.addBeforeA(function(c,a,b){});f.addZTreeTools(function(c,a){a.showNodes=function(a,b){d.showNodes(c,a,b)};a.showNode=function(a,b){a&&d.showNodes(c,[a],b)};a.hideNodes=function(a,b){d.hideNodes(c,a,b)};a.hideNode=function(a,b){a&&d.hideNodes(c,[a],b)};var b=a.checkNode;b&&(a.checkNode=function(c,d,f,h){c&&c.isHidden||b.apply(a,arguments)})});var q=f.initNode;f.initNode=function(c,a,b,e,g,k,h){var l=(e?e:f.getRoot(c))[c.data.key.children];f.tmpHideFirstNode=d.setFirstNodeForHide(c,l);f.tmpHideLastNode=d.setLastNodeForHide(c,l);h&&(d.setNodeLineIcos(c,f.tmpHideFirstNode),d.setNodeLineIcos(c,f.tmpHideLastNode));g=f.tmpHideFirstNode===b;k=f.tmpHideLastNode===b;q&&q.apply(f,arguments);h&&k&&d.clearOldLastNode(c,b,h)};var r=f.makeChkFlag;r&&(f.makeChkFlag=function(c,a){a&&a.isHidden||r.apply(f,arguments)});var t=f.getTreeCheckedNodes;t&&(f.getTreeCheckedNodes=function(c,a,b,e){if(a&&0<a.length){var d=a[0].getParentNode();if(d&&d.isHidden)return[]}return t.apply(f,arguments)});var u=f.getTreeChangeCheckedNodes;u&&(f.getTreeChangeCheckedNodes=function(c,a,b){if(a&&0<a.length){var d=a[0].getParentNode();if(d&&d.isHidden)return[]}return u.apply(f,arguments)});var v=d.expandCollapseSonNode;v&&(d.expandCollapseSonNode=function(c,a,b,e,f){a&&a.isHidden||v.apply(d,arguments)});var w=d.setSonNodeCheckBox;w&&(d.setSonNodeCheckBox=function(c,a,b,e){a&&a.isHidden||w.apply(d,arguments)});var x=d.repairParentChkClassWithSelf;x&&(d.repairParentChkClassWithSelf=function(c,a){a&&a.isHidden||x.apply(d,arguments)})})(jQuery);