
/*
 * JQuery zTree core v3.5.28
 * http://treejs.cn/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2017-01-20
 */(function(z){var H={},I={},C={},w={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},g=[function(l){var d=l.treeObj,b=p.event;d.bind(b.NODECREATED,function(d,b,a){f.apply(l.callback.onNodeCreated,[d,b,a])});d.bind(b.CLICK,function(d,b,a,F,c){f.apply(l.callback.onClick,[b,a,F,c])});d.bind(b.EXPAND,function(d,b,a){f.apply(l.callback.onExpand,[d,b,a])});d.bind(b.COLLAPSE,function(d,b,a){f.apply(l.callback.onCollapse,[d,b,a])});d.bind(b.ASYNC_SUCCESS,function(d,b,a,F){f.apply(l.callback.onAsyncSuccess,[d,b,a,F])});d.bind(b.ASYNC_ERROR,function(d,b,a,F,c,e){f.apply(l.callback.onAsyncError,[d,b,a,F,c,e])});d.bind(b.REMOVE,function(d,b,a){f.apply(l.callback.onRemove,[d,b,a])});d.bind(b.SELECTED,function(d,b,a){f.apply(l.callback.onSelected,[b,a])});d.bind(b.UNSELECTED,function(d,b,a){f.apply(l.callback.onUnSelected,[b,a])})}],r=[function(l){var d=p.event;l.treeObj.unbind(d.NODECREATED).unbind(d.CLICK).unbind(d.EXPAND).unbind(d.COLLAPSE).unbind(d.ASYNC_SUCCESS).unbind(d.ASYNC_ERROR).unbind(d.REMOVE).unbind(d.SELECTED).unbind(d.UNSELECTED)}],t=[function(l){var d=b.getCache(l);d||(d={},b.setCache(l,d));d.nodes=[];d.doms=[]}],u=[function(l,d,a,h,c,e,k){if(a){k=b.getRoot(l);var n=l.data.key.children;a.level=d;a.tId=l.treeId+"_"+ ++k.zId;a.parentTId=h?h.tId:null;a.open="string"==typeof a.open?f.eqs(a.open,"true"):!!a.open;a[n]&&0<a[n].length?(a.isParent=!0,a.zAsync=!0):(a.isParent="string"==typeof a.isParent?f.eqs(a.isParent,"true"):!!a.isParent,a.open=a.isParent&&!l.async.enable?a.open:!1,a.zAsync=!a.isParent);a.isFirstNode=c;a.isLastNode=e;a.getParentNode=function(){return b.getNodeCache(l,a.parentTId)};a.getPreNode=function(){return b.getPreNode(l,a)};a.getNextNode=function(){return b.getNextNode(l,a)};a.getIndex=function(){return b.getNodeIndex(l,a)};a.getPath=function(){return b.getNodePath(l,a)};a.isAjaxing=!1;b.fixPIdKeyValue(l,a)}}],v=[function(l){var d=l.target,a=b.getSetting(l.data.treeId),h="",c=null,e="",k="",m=null,g=null,r=null;if(f.eqs(l.type,"mousedown"))k="mousedown";else if(f.eqs(l.type,"mouseup"))k="mouseup";else if(f.eqs(l.type,"contextmenu"))k="contextmenu";else if(f.eqs(l.type,"click"))if(f.eqs(d.tagName,"span")&&null!==d.getAttribute("treeNode"+p.id.SWITCH))h=f.getNodeMainDom(d).id,e="switchNode";else{if(r=f.getMDom(a,d,[{tagName:"a",attrName:"treeNode"+p.id.A}]))h=f.getNodeMainDom(r).id,e="clickNode"}else f.eqs(l.type,"dblclick")&&(k="dblclick",r=f.getMDom(a,d,[{tagName:"a",attrName:"treeNode"+p.id.A}]))&&(h=f.getNodeMainDom(r).id,e="switchNode");0<k.length&&0==h.length&&(r=f.getMDom(a,d,[{tagName:"a",attrName:"treeNode"+p.id.A}]))&&(h=f.getNodeMainDom(r).id);if(0<h.length)switch(c=b.getNodeCache(a,h),e){case "switchNode":c.isParent?f.eqs(l.type,"click")||f.eqs(l.type,"dblclick")&&f.apply(a.view.dblClickExpand,[a.treeId,c],a.view.dblClickExpand)?m=n.onSwitchNode:e="":e="";break;case "clickNode":m=n.onClickNode}switch(k){case "mousedown":g=n.onZTreeMousedown;break;case "mouseup":g=n.onZTreeMouseup;break;case "dblclick":g=n.onZTreeDblclick;break;case "contextmenu":g=n.onZTreeContextmenu}return{stop:!1,node:c,nodeEventType:e,nodeEventCallback:m,treeEventType:k,treeEventCallback:g}}],B=[function(l){var d=b.getRoot(l);d||(d={},b.setRoot(l,d));d[l.data.key.children]=[];d.expandTriggerFlag=!1;d.curSelectedList=[];d.noSelection=!0;d.createdNodes=[];d.zId=0;d._ver=(new Date).getTime()}],M=[],K=[],L=[],m=[],a=[],b={addNodeCache:function(l,d){b.getCache(l).nodes[b.getNodeCacheId(d.tId)]=d},getNodeCacheId:function(l){return l.substring(l.lastIndexOf("_")+1)},addAfterA:function(l){K.push(l)},addBeforeA:function(l){M.push(l)},addInnerAfterA:function(l){m.push(l)},addInnerBeforeA:function(l){L.push(l)},addInitBind:function(l){g.push(l)},addInitUnBind:function(l){r.push(l)},addInitCache:function(l){t.push(l)},addInitNode:function(l){u.push(l)},addInitProxy:function(l,d){d?v.splice(0,0,l):v.push(l)},addInitRoot:function(l){B.push(l)},addNodesData:function(l,d,a,b){var c=l.data.key.children;d[c]?a>=d[c].length&&(a=-1):(d[c]=[],a=-1);0<d[c].length&&0===a?(d[c][0].isFirstNode=!1,e.setNodeLineIcos(l,d[c][0])):0<d[c].length&&0>a&&(d[c][d[c].length-1].isLastNode=!1,e.setNodeLineIcos(l,d[c][d[c].length-1]));d.isParent=!0;0>a?d[c]=d[c].concat(b):(l=[a,0].concat(b),d[c].splice.apply(d[c],l))},addSelectedNode:function(l,d){var a=b.getRoot(l);b.isSelectedNode(l,d)||a.curSelectedList.push(d)},addCreatedNode:function(l,d){(l.callback.onNodeCreated||l.view.addDiyDom)&&b.getRoot(l).createdNodes.push(d)},addZTreeTools:function(l){a.push(l)},exSetting:function(l){z.extend(!0,w,l)},fixPIdKeyValue:function(l,d){l.data.simpleData.enable&&(d[l.data.simpleData.pIdKey]=d.parentTId?d.getParentNode()[l.data.simpleData.idKey]:l.data.simpleData.rootPId)},getAfterA:function(l,d,a){for(var b=0,c=K.length;b<c;b++)K[b].apply(this,arguments)},getBeforeA:function(l,d,a){for(var b=0,c=M.length;b<c;b++)M[b].apply(this,arguments)},getInnerAfterA:function(l,d,a){for(var b=0,c=m.length;b<c;b++)m[b].apply(this,arguments)},getInnerBeforeA:function(l,d,a){for(var b=0,c=L.length;b<c;b++)L[b].apply(this,arguments)},getCache:function(l){return C[l.treeId]},getNodeIndex:function(l,d){if(!d)return null;for(var a=l.data.key.children,h=d.parentTId?d.getParentNode():b.getRoot(l),c=0,e=h[a].length-1;c<=e;c++)if(h[a][c]===d)return c;return-1},getNextNode:function(l,d){if(!d)return null;for(var a=l.data.key.children,c=d.parentTId?d.getParentNode():b.getRoot(l),q=0,e=c[a].length-1;q<=e;q++)if(c[a][q]===d)return q==e?null:c[a][q+1];return null},getNodeByParam:function(l,d,a,c){if(!d||!a)return null;for(var q=l.data.key.children,e=0,f=d.length;e<f;e++){if(d[e][a]==c)return d[e];var k=b.getNodeByParam(l,d[e][q],a,c);if(k)return k}return null},getNodeCache:function(l,d){if(!d)return null;var a=C[l.treeId].nodes[b.getNodeCacheId(d)];return a?a:null},getNodeName:function(l,d){return""+d[l.data.key.name]},getNodePath:function(l,d){if(!d)return null;var a;(a=d.parentTId?d.getParentNode().getPath():[])&&a.push(d);return a},getNodeTitle:function(l,d){return""+d[""===l.data.key.title?l.data.key.name:l.data.key.title]},getNodes:function(l){return b.getRoot(l)[l.data.key.children]},getNodesByParam:function(l,d,a,c){if(!d||!a)return[];for(var q=l.data.key.children,e=[],f=0,k=d.length;f<k;f++)d[f][a]==c&&e.push(d[f]),e=e.concat(b.getNodesByParam(l,d[f][q],a,c));return e},getNodesByParamFuzzy:function(l,d,a,c){if(!d||!a)return[];var q=l.data.key.children,e=[];c=c.toLowerCase();for(var f=0,k=d.length;f<k;f++)"string"==typeof d[f][a]&&-1<d[f][a].toLowerCase().indexOf(c)&&e.push(d[f]),e=e.concat(b.getNodesByParamFuzzy(l,d[f][q],a,c));return e},getNodesByFilter:function(l,d,a,c,q){if(!d)return c?null:[];for(var e=l.data.key.children,k=c?null:[],n=0,p=d.length;n<p;n++){if(f.apply(a,[d[n],q],!1)){if(c)return d[n];k.push(d[n])}var m=b.getNodesByFilter(l,d[n][e],a,c,q);if(c&&m)return m;k=c?m:k.concat(m)}return k},getPreNode:function(l,d){if(!d)return null;for(var a=l.data.key.children,c=d.parentTId?d.getParentNode():b.getRoot(l),q=0,e=c[a].length;q<e;q++)if(c[a][q]===d)return 0==q?null:c[a][q-1];return null},getRoot:function(l){return l?I[l.treeId]:null},getRoots:function(){return I},getSetting:function(l){return H[l]},getSettings:function(){return H},getZTreeTools:function(l){return(l=this.getRoot(this.getSetting(l)))?l.treeTools:null},initCache:function(l){for(var d=0,a=t.length;d<a;d++)t[d].apply(this,arguments)},initNode:function(l,d,a,b,c,e){for(var f=0,k=u.length;f<k;f++)u[f].apply(this,arguments)},initRoot:function(l){for(var d=0,a=B.length;d<a;d++)B[d].apply(this,arguments)},isSelectedNode:function(l,d){for(var a=b.getRoot(l),c=0,q=a.curSelectedList.length;c<q;c++)if(d===a.curSelectedList[c])return!0;return!1},removeNodeCache:function(l,d){var a=l.data.key.children;if(d[a])for(var c=0,q=d[a].length;c<q;c++)b.removeNodeCache(l,d[a][c]);b.getCache(l).nodes[b.getNodeCacheId(d.tId)]=null},removeSelectedNode:function(l,d){for(var a=b.getRoot(l),c=0,q=a.curSelectedList.length;c<q;c++)d!==a.curSelectedList[c]&&b.getNodeCache(l,a.curSelectedList[c].tId)||(a.curSelectedList.splice(c,1),l.treeObj.trigger(p.event.UNSELECTED,[l.treeId,d]),c--,q--)},setCache:function(l,d){C[l.treeId]=d},setRoot:function(l,d){I[l.treeId]=d},setZTreeTools:function(l,d){for(var b=0,c=a.length;b<c;b++)a[b].apply(this,arguments)},transformToArrayFormat:function(l,d){if(!d)return[];var a=l.data.key.children,c=[];if(f.isArray(d))for(var q=0,e=d.length;q<e;q++)c.push(d[q]),d[q][a]&&(c=c.concat(b.transformToArrayFormat(l,d[q][a])));else c.push(d),d[a]&&(c=c.concat(b.transformToArrayFormat(l,d[a])));return c},transformTozTreeFormat:function(l,d){var a,b,c=l.data.simpleData.idKey,e=l.data.simpleData.pIdKey,k=l.data.key.children;if(!c||""==c||!d)return[];if(f.isArray(d)){var n=[],p={};a=0;for(b=d.length;a<b;a++)p[d[a][c]]=d[a];a=0;for(b=d.length;a<b;a++)p[d[a][e]]&&d[a][c]!=d[a][e]?(p[d[a][e]][k]||(p[d[a][e]][k]=[]),p[d[a][e]][k].push(d[a])):n.push(d[a]);return n}return[d]}},c={bindEvent:function(a){for(var d=0,b=g.length;d<b;d++)g[d].apply(this,arguments)},unbindEvent:function(a){for(var d=0,b=r.length;d<b;d++)r[d].apply(this,arguments)},bindTree:function(a){var d={treeId:a.treeId},b=a.treeObj;a.view.txtSelectedEnable||b.bind("selectstart",n.onSelectStart).css({"-moz-user-select":"-moz-none"});b.bind("click",d,c.proxy);b.bind("dblclick",d,c.proxy);b.bind("mouseover",d,c.proxy);b.bind("mouseout",d,c.proxy);b.bind("mousedown",d,c.proxy);b.bind("mouseup",d,c.proxy);b.bind("contextmenu",d,c.proxy)},unbindTree:function(a){a.treeObj.unbind("selectstart",n.onSelectStart).unbind("click",c.proxy).unbind("dblclick",c.proxy).unbind("mouseover",c.proxy).unbind("mouseout",c.proxy).unbind("mousedown",c.proxy).unbind("mouseup",c.proxy).unbind("contextmenu",c.proxy)},doProxy:function(a){for(var d=[],b=0,c=v.length;b<c;b++){var q=v[b].apply(this,arguments);d.push(q);if(q.stop)break}return d},proxy:function(a){var d=b.getSetting(a.data.treeId);if(!f.uCanDo(d,a))return!0;for(var d=c.doProxy(a),F=!0,h=0,q=d.length;h<q;h++){var e=d[h];e.nodeEventCallback&&(F=e.nodeEventCallback.apply(e,[a,e.node])&&F);e.treeEventCallback&&(F=e.treeEventCallback.apply(e,[a,e.node])&&F)}return F}},n={onSwitchNode:function(a,d){var c=b.getSetting(a.data.treeId);if(d.open){if(0==f.apply(c.callback.beforeCollapse,[c.treeId,d],!0))return!0}else if(0==f.apply(c.callback.beforeExpand,[c.treeId,d],!0))return!0;b.getRoot(c).expandTriggerFlag=!0;e.switchNode(c,d);return!0},onClickNode:function(a,d){var c=b.getSetting(a.data.treeId),h=c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&b.isSelectedNode(c,d)?0:c.view.autoCancelSelected&&(a.ctrlKey||a.metaKey)&&c.view.selectedMulti?2:1;if(0==f.apply(c.callback.beforeClick,[c.treeId,d,h],!0))return!0;0===h?e.cancelPreSelectedNode(c,d):e.selectNode(c,d,2===h);c.treeObj.trigger(p.event.CLICK,[a,c.treeId,d,h]);return!0},onZTreeMousedown:function(a,d){var c=b.getSetting(a.data.treeId);f.apply(c.callback.beforeMouseDown,[c.treeId,d],!0)&&f.apply(c.callback.onMouseDown,[a,c.treeId,d]);return!0},onZTreeMouseup:function(a,d){var c=b.getSetting(a.data.treeId);f.apply(c.callback.beforeMouseUp,[c.treeId,d],!0)&&f.apply(c.callback.onMouseUp,[a,c.treeId,d]);return!0},onZTreeDblclick:function(a,d){var c=b.getSetting(a.data.treeId);f.apply(c.callback.beforeDblClick,[c.treeId,d],!0)&&f.apply(c.callback.onDblClick,[a,c.treeId,d]);return!0},onZTreeContextmenu:function(a,d){var c=b.getSetting(a.data.treeId);f.apply(c.callback.beforeRightClick,[c.treeId,d],!0)&&f.apply(c.callback.onRightClick,[a,c.treeId,d]);return"function"!=typeof c.callback.onRightClick},onSelectStart:function(a){a=a.originalEvent.srcElement.nodeName.toLowerCase();return"input"===a||"textarea"===a}},f={apply:function(a,d,b){return"function"==typeof a?a.apply(y,d?d:[]):b},canAsync:function(a,d){var b=a.data.key.children;return a.async.enable&&d&&d.isParent&&!(d.zAsync||d[b]&&0<d[b].length)},clone:function(a){if(null===a)return null;var d=f.isArray(a)?[]:{},b;for(b in a)d[b]=a[b]instanceof Date?new Date(a[b].getTime()):"object"===typeof a[b]?f.clone(a[b]):a[b];return d},eqs:function(a,d){return a.toLowerCase()===d.toLowerCase()},isArray:function(a){return"[object Array]"===Object.prototype.toString.apply(a)},isElement:function(a){return"object"===typeof HTMLElement?a instanceof HTMLElement:a&&"object"===typeof a&&null!==a&&1===a.nodeType&&"string"===typeof a.nodeName},$:function(a,d,b){d&&"string"!=typeof d&&(b=d,d="");return"string"==typeof a?z(a,b?b.treeObj.get(0).ownerDocument:null):z("#"+a.tId+d,b?b.treeObj:null)},getMDom:function(a,d,b){if(!d)return null;for(;d&&d.id!==a.treeId;){for(var c=0,q=b.length;d.tagName&&c<q;c++)if(f.eqs(d.tagName,b[c].tagName)&&null!==d.getAttribute(b[c].attrName))return d;d=d.parentNode}return null},getNodeMainDom:function(a){return z(a).parent("li").get(0)||z(a).parentsUntil("li").parent().get(0)},isChildOrSelf:function(a,d){return 0<z(a).closest("#"+d).length},uCanDo:function(a,d){return!0}},e={addNodes:function(a,d,c,h,q){if(!a.data.keep.leaf||!d||d.isParent)if(f.isArray(h)||(h=[h]),a.data.simpleData.enable&&(h=b.transformTozTreeFormat(a,h)),d){var n=k(d,p.id.SWITCH,a),m=k(d,p.id.ICON,a),g=k(d,p.id.UL,a);d.open||(e.replaceSwitchClass(d,n,p.folder.CLOSE),e.replaceIcoClass(d,m,p.folder.CLOSE),d.open=!1,g.css({display:"none"}));b.addNodesData(a,d,c,h);e.createNodes(a,d.level+1,h,d,c);q||e.expandCollapseParentNode(a,d,!0)}else b.addNodesData(a,b.getRoot(a),c,h),e.createNodes(a,0,h,null,c)},appendNodes:function(a,d,c,h,q,f,k){if(!c)return[];var n=[],p=a.data.key.children,m=(h?h:b.getRoot(a))[p],g,r;if(!m||q>=m.length-c.length)q=-1;for(var y=0,u=c.length;y<u;y++){var t=c[y];f&&(g=(0===q||m.length==c.length)&&0==y,r=0>q&&y==c.length-1,b.initNode(a,d,t,h,g,r,k),b.addNodeCache(a,t));g=[];t[p]&&0<t[p].length&&(g=e.appendNodes(a,d+1,t[p],t,-1,f,k&&t.open));k&&(e.makeDOMNodeMainBefore(n,a,t),e.makeDOMNodeLine(n,a,t),b.getBeforeA(a,t,n),e.makeDOMNodeNameBefore(n,a,t),b.getInnerBeforeA(a,t,n),e.makeDOMNodeIcon(n,a,t),b.getInnerAfterA(a,t,n),e.makeDOMNodeNameAfter(n,a,t),b.getAfterA(a,t,n),t.isParent&&t.open&&e.makeUlHtml(a,t,n,g.join("")),e.makeDOMNodeMainAfter(n,a,t),b.addCreatedNode(a,t))}return n},appendParentULDom:function(a,d){var b=[],c=k(d,a);!c.get(0)&&d.parentTId&&(e.appendParentULDom(a,d.getParentNode()),c=k(d,a));var q=k(d,p.id.UL,a);q.get(0)&&q.remove();q=e.appendNodes(a,d.level+1,d[a.data.key.children],d,-1,!1,!0);e.makeUlHtml(a,d,b,q.join(""));c.append(b.join(""))},asyncNode:function(a,d,c,h){var q,n;if(d&&!d.isParent)return f.apply(h),!1;if(d&&d.isAjaxing)return!1;if(0==f.apply(a.callback.beforeAsync,[a.treeId,d],!0))return f.apply(h),!1;d&&(d.isAjaxing=!0,k(d,p.id.ICON,a).attr({style:"","class":p.className.BUTTON+" "+p.className.ICO_LOADING}));var m={};q=0;for(n=a.async.autoParam.length;d&&q<n;q++){var g=a.async.autoParam[q].split("\x3d"),r=g;1<g.length&&(r=g[1],g=g[0]);m[r]=d[g]}if(f.isArray(a.async.otherParam))for(q=0,n=a.async.otherParam.length;q<n;q+=2)m[a.async.otherParam[q]]=a.async.otherParam[q+1];else for(var y in a.async.otherParam)m[y]=a.async.otherParam[y];var t=b.getRoot(a)._ver;z.ajax({contentType:a.async.contentType,cache:!1,type:a.async.type,url:f.apply(a.async.url,[a.treeId,d],a.async.url),data:-1<a.async.contentType.indexOf("application/json")?JSON.stringify(m):m,dataType:a.async.dataType,success:function(q){if(t==b.getRoot(a)._ver){var k=[];try{k=q&&0!=q.length?"string"==typeof q?eval("("+q+")"):q:[]}catch(n){k=q}d&&(d.isAjaxing=null,d.zAsync=!0);e.setNodeLineIcos(a,d);k&&""!==k?(k=f.apply(a.async.dataFilter,[a.treeId,d,k],k),e.addNodes(a,d,-1,k?f.clone(k):[],!!c)):e.addNodes(a,d,-1,[],!!c);a.treeObj.trigger(p.event.ASYNC_SUCCESS,[a.treeId,d,q]);f.apply(h)}},error:function(c,h,q){t==b.getRoot(a)._ver&&(d&&(d.isAjaxing=null),e.setNodeLineIcos(a,d),a.treeObj.trigger(p.event.ASYNC_ERROR,[a.treeId,d,c,h,q]))}});return!0},cancelPreSelectedNode:function(a,d,c){var h=b.getRoot(a).curSelectedList,q,e;for(q=h.length-1;0<=q;q--)if(e=h[q],d===e||!(d||c&&c===e))if(k(e,p.id.A,a).removeClass(p.node.CURSELECTED),d){b.removeSelectedNode(a,d);break}else h.splice(q,1),a.treeObj.trigger(p.event.UNSELECTED,[a.treeId,e])},createNodeCallback:function(a){if(a.callback.onNodeCreated||a.view.addDiyDom)for(var d=b.getRoot(a);0<d.createdNodes.length;){var c=d.createdNodes.shift();f.apply(a.view.addDiyDom,[a.treeId,c]);a.callback.onNodeCreated&&a.treeObj.trigger(p.event.NODECREATED,[a.treeId,c])}},createNodes:function(a,d,c,h,q){if(c&&0!=c.length){var f=b.getRoot(a),n=a.data.key.children,n=!h||h.open||!!k(h[n][0],a).get(0);f.createdNodes=[];d=e.appendNodes(a,d,c,h,q,!0,n);var m,g;h?(h=k(h,p.id.UL,a),h.get(0)&&(m=h)):m=a.treeObj;m&&(0<=q&&(g=m.children()[q]),0<=q&&g?z(g).before(d.join("")):m.append(d.join("")));e.createNodeCallback(a)}},destroy:function(a){a&&(b.initCache(a),b.initRoot(a),c.unbindTree(a),c.unbindEvent(a),a.treeObj.empty(),delete H[a.treeId])},expandCollapseNode:function(a,d,c,h,q){var n=b.getRoot(a),m=a.data.key.children,g;if(d)if(n.expandTriggerFlag&&(g=q,q=function(){g&&g();d.open?a.treeObj.trigger(p.event.EXPAND,[a.treeId,d]):a.treeObj.trigger(p.event.COLLAPSE,[a.treeId,d])},n.expandTriggerFlag=!1),!d.open&&d.isParent&&(!k(d,p.id.UL,a).get(0)||d[m]&&0<d[m].length&&!k(d[m][0],a).get(0))&&(e.appendParentULDom(a,d),e.createNodeCallback(a)),d.open==c)f.apply(q,[]);else{c=k(d,p.id.UL,a);var n=k(d,p.id.SWITCH,a),r=k(d,p.id.ICON,a);d.isParent?(d.open=!d.open,d.iconOpen&&d.iconClose&&r.attr("style",e.makeNodeIcoStyle(a,d)),d.open?(e.replaceSwitchClass(d,n,p.folder.OPEN),e.replaceIcoClass(d,r,p.folder.OPEN),0==h||""==a.view.expandSpeed?(c.show(),f.apply(q,[])):d[m]&&0<d[m].length?c.slideDown(a.view.expandSpeed,q):(c.show(),f.apply(q,[]))):(e.replaceSwitchClass(d,n,p.folder.CLOSE),e.replaceIcoClass(d,r,p.folder.CLOSE),0!=h&&""!=a.view.expandSpeed&&d[m]&&0<d[m].length?c.slideUp(a.view.expandSpeed,q):(c.hide(),f.apply(q,[])))):f.apply(q,[])}else f.apply(q,[])},expandCollapseParentNode:function(a,d,b,c,q){d&&(d.parentTId?(e.expandCollapseNode(a,d,b,c),d.parentTId&&e.expandCollapseParentNode(a,d.getParentNode(),b,c,q)):e.expandCollapseNode(a,d,b,c,q))},expandCollapseSonNode:function(a,d,c,h,q){var f=b.getRoot(a),k=a.data.key.children,f=d?d[k]:f[k],k=d?!1:h,n=b.getRoot(a).expandTriggerFlag;b.getRoot(a).expandTriggerFlag=!1;if(f)for(var m=0,p=f.length;m<p;m++)f[m]&&e.expandCollapseSonNode(a,f[m],c,k);b.getRoot(a).expandTriggerFlag=n;e.expandCollapseNode(a,d,c,h,q)},isSelectedNode:function(a,d){if(!d)return!1;var c=b.getRoot(a).curSelectedList,h;for(h=c.length-1;0<=h;h--)if(d===c[h])return!0;return!1},makeDOMNodeIcon:function(a,d,c){var h=b.getNodeName(d,c),h=d.view.nameIsHTML?h:h.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");a.push("\x3cspan id\x3d'",c.tId,p.id.ICON,"' title\x3d'' treeNode",p.id.ICON," class\x3d'",e.makeNodeIcoClass(d,c),"' style\x3d'",e.makeNodeIcoStyle(d,c),"'\x3e\x3c/span\x3e\x3cspan id\x3d'",c.tId,p.id.SPAN,"' class\x3d'",p.className.NAME,"'\x3e",h,"\x3c/span\x3e")},makeDOMNodeLine:function(a,d,b){a.push("\x3cspan id\x3d'",b.tId,p.id.SWITCH,"' title\x3d'' class\x3d'",e.makeNodeLineClass(d,b),"' treeNode",p.id.SWITCH,"\x3e\x3c/span\x3e")},makeDOMNodeMainAfter:function(a,d,b){a.push("\x3c/li\x3e")},makeDOMNodeMainBefore:function(a,d,b){a.push("\x3cli id\x3d'",b.tId,"' class\x3d'",p.className.LEVEL,b.level,"' tabindex\x3d'0' hidefocus\x3d'true' treenode\x3e")},makeDOMNodeNameAfter:function(a,d,b){a.push("\x3c/a\x3e")},makeDOMNodeNameBefore:function(a,d,c){var h=b.getNodeTitle(d,c),q=e.makeNodeUrl(d,c),k=e.makeNodeFontCss(d,c),n=[],m;for(m in k)n.push(m,":",k[m],";");a.push("\x3ca id\x3d'",c.tId,p.id.A,"' class\x3d'",p.className.LEVEL,c.level,"' treeNode",p.id.A,' onclick\x3d"',c.click||"",'" ',null!=q&&0<q.length?"href\x3d'"+q+"'":""," target\x3d'",e.makeNodeTarget(c),"' style\x3d'",n.join(""),"'");f.apply(d.view.showTitle,[d.treeId,c],d.view.showTitle)&&h&&a.push("title\x3d'",h.replace(/'/g,"\x26#39;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),"'");a.push("\x3e")},makeNodeFontCss:function(a,d){var b=f.apply(a.view.fontCss,[a.treeId,d],a.view.fontCss);return b&&"function"!=typeof b?b:{}},makeNodeIcoClass:function(a,d){var b=["ico"];d.isAjaxing||(b[0]=(d.iconSkin?d.iconSkin+"_":"")+b[0],d.isParent?b.push(d.open?p.folder.OPEN:p.folder.CLOSE):b.push(p.folder.DOCU));return p.className.BUTTON+" "+b.join("_")},makeNodeIcoStyle:function(a,d){var b=[];if(!d.isAjaxing){var c=d.isParent&&d.iconOpen&&d.iconClose?d.open?d.iconOpen:d.iconClose:d[a.data.key.icon];c&&b.push("background:url(",c,") 0 0 no-repeat;");0!=a.view.showIcon&&f.apply(a.view.showIcon,[a.treeId,d],!0)||b.push("width:0px;height:0px;")}return b.join("")},makeNodeLineClass:function(a,d){var b=[];a.view.showLine?0==d.level&&d.isFirstNode&&d.isLastNode?b.push(p.line.ROOT):0==d.level&&d.isFirstNode?b.push(p.line.ROOTS):d.isLastNode?b.push(p.line.BOTTOM):b.push(p.line.CENTER):b.push(p.line.NOLINE);d.isParent?b.push(d.open?p.folder.OPEN:p.folder.CLOSE):b.push(p.folder.DOCU);return e.makeNodeLineClassEx(d)+b.join("_")},makeNodeLineClassEx:function(a){return p.className.BUTTON+" "+p.className.LEVEL+a.level+" "+p.className.SWITCH+" "},makeNodeTarget:function(a){return a.target||"_blank"},makeNodeUrl:function(a,b){var c=a.data.key.url;return b[c]?b[c]:null},makeUlHtml:function(a,b,c,h){c.push("\x3cul id\x3d'",b.tId,p.id.UL,"' class\x3d'",p.className.LEVEL,b.level," ",e.makeUlLineClass(a,b),"' style\x3d'display:",b.open?"block":"none","'\x3e");c.push(h);c.push("\x3c/ul\x3e")},makeUlLineClass:function(a,b){return a.view.showLine&&!b.isLastNode?p.line.LINE:""},removeChildNodes:function(a,d){if(d){var c=a.data.key.children,h=d[c];if(h){for(var q=0,f=h.length;q<f;q++)b.removeNodeCache(a,h[q]);b.removeSelectedNode(a);delete d[c];a.data.keep.parent?k(d,p.id.UL,a).empty():(d.isParent=!1,d.open=!1,c=k(d,p.id.SWITCH,a),h=k(d,p.id.ICON,a),e.replaceSwitchClass(d,c,p.folder.DOCU),e.replaceIcoClass(d,h,p.folder.DOCU),k(d,p.id.UL,a).remove())}}},scrollIntoView:function(a){a&&(Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(a){function b(c,l,h,e){return!1===a||h<=c+e&&c<=l+e?Math.min(h,Math.max(l,c)):(l+h)/2}function c(a,b,d,l){return{left:a,top:b,width:d,height:l,right:a+d,bottom:b+l,translate:function(e,q){return c(e+a,q+b,d,l)},relativeFromTo:function(e,q){var f=a,n=b;e=e.offsetParent;q=q.offsetParent;if(e===q)return k;for(;e;e=e.offsetParent)f+=e.offsetLeft+e.clientLeft,n+=e.offsetTop+e.clientTop;for(;q;q=q.offsetParent)f-=q.offsetLeft+q.clientLeft,n-=q.offsetTop+q.clientTop;return c(f,n,d,l)}}}for(var l,e=this,k=c(this.offsetLeft,this.offsetTop,this.offsetWidth,this.offsetHeight);f.isElement(l=e.parentNode);){var n=l.offsetLeft+l.clientLeft,m=l.offsetTop+l.clientTop,k=k.relativeFromTo(e,l).translate(-n,-m);l.scrollLeft=b(l.scrollLeft,k.right-l.clientWidth,k.left,l.clientWidth);l.scrollTop=b(l.scrollTop,k.bottom-l.clientHeight,k.top,l.clientHeight);k=k.translate(n-l.scrollLeft,m-l.scrollTop);e=l}}),a.scrollIntoViewIfNeeded())},setFirstNode:function(a,b){var c=a.data.key.children;0<b[c].length&&(b[c][0].isFirstNode=!0)},setLastNode:function(a,b){var c=a.data.key.children,e=b[c].length;0<e&&(b[c][e-1].isLastNode=!0)},removeNode:function(a,d){var c=b.getRoot(a),h=a.data.key.children,q=d.parentTId?d.getParentNode():c;d.isFirstNode=!1;d.isLastNode=!1;d.getPreNode=function(){return null};d.getNextNode=function(){return null};if(b.getNodeCache(a,d.tId)){k(d,a).remove();b.removeNodeCache(a,d);b.removeSelectedNode(a,d);for(var f=0,n=q[h].length;f<n;f++)if(q[h][f].tId==d.tId){q[h].splice(f,1);break}e.setFirstNode(a,q);e.setLastNode(a,q);var m,f=q[h].length;if(!a.data.keep.parent&&0==f)q.isParent=!1,q.open=!1,f=k(q,p.id.UL,a),n=k(q,p.id.SWITCH,a),m=k(q,p.id.ICON,a),e.replaceSwitchClass(q,n,p.folder.DOCU),e.replaceIcoClass(q,m,p.folder.DOCU),f.css("display","none");else if(a.view.showLine&&0<f){var g=q[h][f-1],f=k(g,p.id.UL,a),n=k(g,p.id.SWITCH,a);m=k(g,p.id.ICON,a);q==c?1==q[h].length?e.replaceSwitchClass(g,n,p.line.ROOT):(c=k(q[h][0],p.id.SWITCH,a),e.replaceSwitchClass(q[h][0],c,p.line.ROOTS),e.replaceSwitchClass(g,n,p.line.BOTTOM)):e.replaceSwitchClass(g,n,p.line.BOTTOM);f.removeClass(p.line.LINE)}}},replaceIcoClass:function(a,b,c){if(b&&!a.isAjaxing&&(a=b.attr("class"),void 0!=a)){a=a.split("_");switch(c){case p.folder.OPEN:case p.folder.CLOSE:case p.folder.DOCU:a[a.length-1]=c}b.attr("class",a.join("_"))}},replaceSwitchClass:function(a,b,c){if(b){var h=b.attr("class");if(void 0!=h){h=h.split("_");switch(c){case p.line.ROOT:case p.line.ROOTS:case p.line.CENTER:case p.line.BOTTOM:case p.line.NOLINE:h[0]=e.makeNodeLineClassEx(a)+c;break;case p.folder.OPEN:case p.folder.CLOSE:case p.folder.DOCU:h[1]=c}b.attr("class",h.join("_"));c!==p.folder.DOCU?b.removeAttr("disabled"):b.attr("disabled","disabled")}}},selectNode:function(a,c,f){f||e.cancelPreSelectedNode(a,null,c);k(c,p.id.A,a).addClass(p.node.CURSELECTED);b.addSelectedNode(a,c);a.treeObj.trigger(p.event.SELECTED,[a.treeId,c])},setNodeFontCss:function(a,b){var c=k(b,p.id.A,a),h=e.makeNodeFontCss(a,b);h&&c.css(h)},setNodeLineIcos:function(a,b){if(b){var c=k(b,p.id.SWITCH,a),h=k(b,p.id.UL,a),q=k(b,p.id.ICON,a),f=e.makeUlLineClass(a,b);0==f.length?h.removeClass(p.line.LINE):h.addClass(f);c.attr("class",e.makeNodeLineClass(a,b));b.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled");q.removeAttr("style");q.attr("style",e.makeNodeIcoStyle(a,b));q.attr("class",e.makeNodeIcoClass(a,b))}},setNodeName:function(a,c){var e=b.getNodeTitle(a,c),h=k(c,p.id.SPAN,a);h.empty();a.view.nameIsHTML?h.html(b.getNodeName(a,c)):h.text(b.getNodeName(a,c));f.apply(a.view.showTitle,[a.treeId,c],a.view.showTitle)&&k(c,p.id.A,a).attr("title",e?e:"")},setNodeTarget:function(a,b){k(b,p.id.A,a).attr("target",e.makeNodeTarget(b))},setNodeUrl:function(a,b){var c=k(b,p.id.A,a),h=e.makeNodeUrl(a,b);null==h||0==h.length?c.removeAttr("href"):c.attr("href",h)},switchNode:function(a,b){b.open||!f.canAsync(a,b)?e.expandCollapseNode(a,b,!b.open):a.async.enable?e.asyncNode(a,b)||e.expandCollapseNode(a,b,!b.open):b&&e.expandCollapseNode(a,b,!b.open)}};z.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:f,view:e,event:c,data:b},getZTreeObj:function(a){return(a=b.getZTreeTools(a))?a:null},destroy:function(a){if(a&&0<a.length)e.destroy(b.getSetting(a));else for(var c in H)e.destroy(H[c])},init:function(a,d,n){var h=f.clone(w);z.extend(!0,h,d);h.treeId=a.attr("id");h.treeObj=a;h.treeObj.empty();H[h.treeId]=h;"undefined"===typeof document.body.style.maxHeight&&(h.view.expandSpeed="");b.initRoot(h);a=b.getRoot(h);d=h.data.key.children;n=n?f.clone(f.isArray(n)?n:[n]):[];a[d]=h.data.simpleData.enable?b.transformTozTreeFormat(h,n):n;b.initCache(h);c.unbindTree(h);c.bindTree(h);c.unbindEvent(h);c.bindEvent(h);n={setting:h,addNodes:function(a,b,c,d){function n(){e.addNodes(h,a,b,l,1==d)}a||(a=null);if(a&&!a.isParent&&h.data.keep.leaf)return null;var k=parseInt(b,10);isNaN(k)?(d=!!c,c=b,b=-1):b=k;if(!c)return null;var l=f.clone(f.isArray(c)?c:[c]);f.canAsync(h,a)?e.asyncNode(h,a,d,n):n();return l},cancelSelectedNode:function(a){e.cancelPreSelectedNode(h,a)},destroy:function(){e.destroy(h)},expandAll:function(a){a=!!a;e.expandCollapseSonNode(h,null,a,!0);return a},expandNode:function(a,c,d,n,l){function m(){var b=k(a,h).get(0);b&&!1!==n&&e.scrollIntoView(b)}if(!a||!a.isParent)return null;!0!==c&&!1!==c&&(c=!a.open);if((l=!!l)&&c&&0==f.apply(h.callback.beforeExpand,[h.treeId,a],!0)||l&&!c&&0==f.apply(h.callback.beforeCollapse,[h.treeId,a],!0))return null;c&&a.parentTId&&e.expandCollapseParentNode(h,a.getParentNode(),c,!1);if(c===a.open&&!d)return null;b.getRoot(h).expandTriggerFlag=l;!f.canAsync(h,a)&&d?e.expandCollapseSonNode(h,a,c,!0,m):(a.open=!c,e.switchNode(this.setting,a),m());return c},getNodes:function(){return b.getNodes(h)},getNodeByParam:function(a,c,d){return a?b.getNodeByParam(h,d?d[h.data.key.children]:b.getNodes(h),a,c):null},getNodeByTId:function(a){return b.getNodeCache(h,a)},getNodesByParam:function(a,c,d){return a?b.getNodesByParam(h,d?d[h.data.key.children]:b.getNodes(h),a,c):null},getNodesByParamFuzzy:function(a,c,d){return a?b.getNodesByParamFuzzy(h,d?d[h.data.key.children]:b.getNodes(h),a,c):null},getNodesByFilter:function(a,c,d,e){c=!!c;return a&&"function"==typeof a?b.getNodesByFilter(h,d?d[h.data.key.children]:b.getNodes(h),a,c,e):c?null:[]},getNodeIndex:function(a){if(!a)return null;for(var c=h.data.key.children,d=a.parentTId?a.getParentNode():b.getRoot(h),e=0,f=d[c].length;e<f;e++)if(d[c][e]==a)return e;return-1},getSelectedNodes:function(){for(var a=[],c=b.getRoot(h).curSelectedList,d=0,e=c.length;d<e;d++)a.push(c[d]);return a},isSelectedNode:function(a){return b.isSelectedNode(h,a)},reAsyncChildNodes:function(a,c,d){if(this.setting.async.enable){var f=!a;f&&(a=b.getRoot(h));if("refresh"==c){c=this.setting.data.key.children;for(var n=0,l=a[c]?a[c].length:0;n<l;n++)b.removeNodeCache(h,a[c][n]);b.removeSelectedNode(h);a[c]=[];f?this.setting.treeObj.empty():k(a,p.id.UL,h).empty()}e.asyncNode(this.setting,f?null:a,!!d)}},refresh:function(){this.setting.treeObj.empty();var a=b.getRoot(h),c=a[h.data.key.children];b.initRoot(h);a[h.data.key.children]=c;b.initCache(h);e.createNodes(h,0,a[h.data.key.children],null,-1)},removeChildNodes:function(a){if(!a)return null;var b=a[h.data.key.children];e.removeChildNodes(h,a);return b?b:null},removeNode:function(a,b){a&&(b=!!b,b&&0==f.apply(h.callback.beforeRemove,[h.treeId,a],!0)||(e.removeNode(h,a),b&&this.setting.treeObj.trigger(p.event.REMOVE,[h.treeId,a])))},selectNode:function(a,b,c){function d(){if(!c){var b=k(a,h).get(0);e.scrollIntoView(b)}}if(a&&f.uCanDo(h)){b=h.view.selectedMulti&&b;if(a.parentTId)e.expandCollapseParentNode(h,a.getParentNode(),!0,!1,d);else if(!c)try{k(a,h).focus().blur()}catch(n){}e.selectNode(h,a,b)}},transformTozTreeNodes:function(a){return b.transformTozTreeFormat(h,a)},transformToArray:function(a){return b.transformToArrayFormat(h,a)},updateNode:function(a,b){a&&k(a,h).get(0)&&f.uCanDo(h)&&(e.setNodeName(h,a),e.setNodeTarget(h,a),e.setNodeUrl(h,a),e.setNodeLineIcos(h,a),e.setNodeFontCss(h,a))}};a.treeTools=n;b.setZTreeTools(h,n);a[d]&&0<a[d].length?e.createNodes(h,0,a[d],null,-1):h.async.enable&&h.async.url&&""!==h.async.url&&e.asyncNode(h);return n}};var y=z.fn.zTree,k=f.$,p=y.consts})(jQuery);(function(z){var H={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},I={check:{enable:!1,autoCheckTrigger:!1,chkStyle:H.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:H.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},C=function(m,a){if(!0===a.chkDisabled)return!1;var b=v.getSetting(m.data.treeId),c=b.data.key.checked;if(0==r.apply(b.callback.beforeCheck,[b.treeId,a],!0))return!0;a[c]=!a[c];u.checkNodeRelation(b,a);c=B(a,t.id.CHECK,b);u.setChkClass(b,c,a);u.repairParentChkClassWithSelf(b,a);b.treeObj.trigger(t.event.CHECK,[m,b.treeId,a]);return!0},w=function(m,a){if(!0===a.chkDisabled)return!1;var b=v.getSetting(m.data.treeId),c=B(a,t.id.CHECK,b);a.check_Focus=!0;u.setChkClass(b,c,a);return!0},g=function(m,a){if(!0===a.chkDisabled)return!1;var b=v.getSetting(m.data.treeId),c=B(a,t.id.CHECK,b);a.check_Focus=!1;u.setChkClass(b,c,a);return!0};z.extend(!0,z.fn.zTree.consts,H);z.extend(!0,z.fn.zTree._z,{tools:{},view:{checkNodeRelation:function(m,a){var b,c,n,f=m.data.key.children,e=m.data.key.checked;b=t.radio;if(m.check.chkStyle==b.STYLE){var g=v.getRadioCheckedList(m);if(a[e])if(m.check.radioType==b.TYPE_ALL){for(c=g.length-1;0<=c;c--)b=g[c],b[e]&&b!=a&&(b[e]=!1,g.splice(c,1),u.setChkClass(m,B(b,t.id.CHECK,m),b),b.parentTId!=a.parentTId&&u.repairParentChkClassWithSelf(m,b));g.push(a)}else for(g=a.parentTId?a.getParentNode():v.getRoot(m),c=0,n=g[f].length;c<n;c++)b=g[f][c],b[e]&&b!=a&&(b[e]=!1,u.setChkClass(m,B(b,t.id.CHECK,m),b));else if(m.check.radioType==b.TYPE_ALL)for(c=0,n=g.length;c<n;c++)if(a==g[c]){g.splice(c,1);break}}else a[e]&&(!a[f]||0==a[f].length||-1<m.check.chkboxType.Y.indexOf("s"))&&u.setSonNodeCheckBox(m,a,!0),a[e]||a[f]&&0!=a[f].length&&!(-1<m.check.chkboxType.N.indexOf("s"))||u.setSonNodeCheckBox(m,a,!1),a[e]&&-1<m.check.chkboxType.Y.indexOf("p")&&u.setParentNodeCheckBox(m,a,!0),!a[e]&&-1<m.check.chkboxType.N.indexOf("p")&&u.setParentNodeCheckBox(m,a,!1)},makeChkClass:function(m,a){var b=m.data.key.checked,c=t.checkbox,n=t.radio,f="",f=!0===a.chkDisabled?c.DISABLED:a.halfCheck?c.PART:m.check.chkStyle==n.STYLE?1>a.check_Child_State?c.FULL:c.PART:a[b]?2===a.check_Child_State||-1===a.check_Child_State?c.FULL:c.PART:1>a.check_Child_State?c.FULL:c.PART,b=m.check.chkStyle+"_"+(a[b]?c.TRUE:c.FALSE)+"_"+f,b=a.check_Focus&&!0!==a.chkDisabled?b+"_"+c.FOCUS:b;return t.className.BUTTON+" "+c.DEFAULT+" "+b},repairAllChk:function(m,a){if(m.check.enable&&m.check.chkStyle===t.checkbox.STYLE)for(var b=m.data.key.checked,c=m.data.key.children,n=v.getRoot(m),f=0,e=n[c].length;f<e;f++){var g=n[c][f];!0!==g.nocheck&&!0!==g.chkDisabled&&(g[b]=a);u.setSonNodeCheckBox(m,g,a)}},repairChkClass:function(m,a){if(a&&(v.makeChkFlag(m,a),!0!==a.nocheck)){var b=B(a,t.id.CHECK,m);u.setChkClass(m,b,a)}},repairParentChkClass:function(m,a){if(a&&a.parentTId){var b=a.getParentNode();u.repairChkClass(m,b);u.repairParentChkClass(m,b)}},repairParentChkClassWithSelf:function(m,a){if(a){var b=m.data.key.children;a[b]&&0<a[b].length?u.repairParentChkClass(m,a[b][0]):u.repairParentChkClass(m,a)}},repairSonChkDisabled:function(m,a,b,c){if(a){var n=m.data.key.children;a.chkDisabled!=b&&(a.chkDisabled=b);u.repairChkClass(m,a);if(a[n]&&c)for(var f=0,e=a[n].length;f<e;f++)u.repairSonChkDisabled(m,a[n][f],b,c)}},repairParentChkDisabled:function(m,a,b,c){a&&(a.chkDisabled!=b&&c&&(a.chkDisabled=b),u.repairChkClass(m,a),u.repairParentChkDisabled(m,a.getParentNode(),b,c))},setChkClass:function(m,a,b){a&&(!0===b.nocheck?a.hide():a.show(),a.attr("class",u.makeChkClass(m,b)))},setParentNodeCheckBox:function(m,a,b,c){var n=m.data.key.children,f=m.data.key.checked,e=B(a,t.id.CHECK,m);c||(c=a);v.makeChkFlag(m,a);!0!==a.nocheck&&!0!==a.chkDisabled&&(a[f]=b,u.setChkClass(m,e,a),m.check.autoCheckTrigger&&a!=c&&m.treeObj.trigger(t.event.CHECK,[null,m.treeId,a]));if(a.parentTId){e=!0;if(!b)for(var n=a.getParentNode()[n],g=0,k=n.length;g<k;g++)if(!0!==n[g].nocheck&&!0!==n[g].chkDisabled&&n[g][f]||(!0===n[g].nocheck||!0===n[g].chkDisabled)&&0<n[g].check_Child_State){e=!1;break}e&&u.setParentNodeCheckBox(m,a.getParentNode(),b,c)}},setSonNodeCheckBox:function(m,a,b,c){if(a){var n=m.data.key.children,f=m.data.key.checked,e=B(a,t.id.CHECK,m);c||(c=a);var g=!1;if(a[n])for(var k=0,p=a[n].length;k<p;k++){var l=a[n][k];u.setSonNodeCheckBox(m,l,b,c);!0===l.chkDisabled&&(g=!0)}a!=v.getRoot(m)&&!0!==a.chkDisabled&&(g&&!0!==a.nocheck&&v.makeChkFlag(m,a),!0!==a.nocheck&&!0!==a.chkDisabled?(a[f]=b,g||(a.check_Child_State=a[n]&&0<a[n].length?b?2:0:-1)):a.check_Child_State=-1,u.setChkClass(m,e,a),m.check.autoCheckTrigger&&a!=c&&!0!==a.nocheck&&!0!==a.chkDisabled&&m.treeObj.trigger(t.event.CHECK,[null,m.treeId,a]))}}},event:{},data:{getRadioCheckedList:function(m){for(var a=v.getRoot(m).radioCheckedList,b=0,c=a.length;b<c;b++)v.getNodeCache(m,a[b].tId)||(a.splice(b,1),b--,c--);return a},getCheckStatus:function(m,a){if(!m.check.enable||a.nocheck||a.chkDisabled)return null;var b=m.data.key.checked;return{checked:a[b],half:a.halfCheck?a.halfCheck:m.check.chkStyle==t.radio.STYLE?2===a.check_Child_State:a[b]?-1<a.check_Child_State&&2>a.check_Child_State:0<a.check_Child_State}},getTreeCheckedNodes:function(m,a,b,c){if(!a)return[];var n=m.data.key.children,f=m.data.key.checked,e=b&&m.check.chkStyle==t.radio.STYLE&&m.check.radioType==t.radio.TYPE_ALL;c=c?c:[];for(var g=0,k=a.length;g<k&&(!0===a[g].nocheck||!0===a[g].chkDisabled||a[g][f]!=b||(c.push(a[g]),!e))&&!(v.getTreeCheckedNodes(m,a[g][n],b,c),e&&0<c.length);g++);return c},getTreeChangeCheckedNodes:function(m,a,b){if(!a)return[];var c=m.data.key.children,n=m.data.key.checked;b=b?b:[];for(var f=0,e=a.length;f<e;f++)!0!==a[f].nocheck&&!0!==a[f].chkDisabled&&a[f][n]!=a[f].checkedOld&&b.push(a[f]),v.getTreeChangeCheckedNodes(m,a[f][c],b);return b},makeChkFlag:function(m,a){if(a){var b=m.data.key.children,c=m.data.key.checked,n=-1;if(a[b])for(var f=0,e=a[b].length;f<e;f++){var g=a[b][f],k=-1;if(m.check.chkStyle==t.radio.STYLE)if(k=!0===g.nocheck||!0===g.chkDisabled?g.check_Child_State:!0===g.halfCheck?2:g[c]?2:0<g.check_Child_State?2:0,2==k){n=2;break}else 0==k&&(n=0);else if(m.check.chkStyle==t.checkbox.STYLE)if(k=!0===g.nocheck||!0===g.chkDisabled?g.check_Child_State:!0===g.halfCheck?1:g[c]?-1===g.check_Child_State||2===g.check_Child_State?2:1:0<g.check_Child_State?1:0,1===k){n=1;break}else if(2===k&&-1<n&&0<f&&k!==n){n=1;break}else if(2===n&&-1<k&&2>k){n=1;break}else-1<k&&(n=k)}a.check_Child_State=n}}}});z=z.fn.zTree;var r=z._z.tools,t=z.consts,u=z._z.view,v=z._z.data,B=r.$;v.exSetting(I);v.addInitBind(function(g){g.treeObj.bind(t.event.CHECK,function(a,b,c,n){a.srcEvent=b;r.apply(g.callback.onCheck,[a,c,n])})});v.addInitUnBind(function(g){g.treeObj.unbind(t.event.CHECK)});v.addInitCache(function(g){});v.addInitNode(function(g,a,b,c,n,f,e){b&&(a=g.data.key.checked,"string"==typeof b[a]&&(b[a]=r.eqs(b[a],"true")),b[a]=!!b[a],b.checkedOld=b[a],"string"==typeof b.nocheck&&(b.nocheck=r.eqs(b.nocheck,"true")),b.nocheck=!!b.nocheck||g.check.nocheckInherit&&c&&!!c.nocheck,"string"==typeof b.chkDisabled&&(b.chkDisabled=r.eqs(b.chkDisabled,"true")),b.chkDisabled=!!b.chkDisabled||g.check.chkDisabledInherit&&c&&!!c.chkDisabled,"string"==typeof b.halfCheck&&(b.halfCheck=r.eqs(b.halfCheck,"true")),b.halfCheck=!!b.halfCheck,b.check_Child_State=-1,b.check_Focus=!1,b.getCheckStatus=function(){return v.getCheckStatus(g,b)},g.check.chkStyle==t.radio.STYLE&&g.check.radioType==t.radio.TYPE_ALL&&b[a]&&v.getRoot(g).radioCheckedList.push(b))});v.addInitProxy(function(m){var a=m.target,b=v.getSetting(m.data.treeId),c="",n=null,f="",e=null;r.eqs(m.type,"mouseover")?b.check.enable&&r.eqs(a.tagName,"span")&&null!==a.getAttribute("treeNode"+t.id.CHECK)&&(c=r.getNodeMainDom(a).id,f="mouseoverCheck"):r.eqs(m.type,"mouseout")?b.check.enable&&r.eqs(a.tagName,"span")&&null!==a.getAttribute("treeNode"+t.id.CHECK)&&(c=r.getNodeMainDom(a).id,f="mouseoutCheck"):r.eqs(m.type,"click")&&b.check.enable&&r.eqs(a.tagName,"span")&&null!==a.getAttribute("treeNode"+t.id.CHECK)&&(c=r.getNodeMainDom(a).id,f="checkNode");if(0<c.length)switch(n=v.getNodeCache(b,c),f){case "checkNode":e=C;break;case "mouseoverCheck":e=w;break;case "mouseoutCheck":e=g}return{stop:"checkNode"===f,node:n,nodeEventType:f,nodeEventCallback:e,treeEventType:"",treeEventCallback:null}},!0);v.addInitRoot(function(g){v.getRoot(g).radioCheckedList=[]});v.addBeforeA(function(g,a,b){g.check.enable&&(v.makeChkFlag(g,a),b.push("\x3cspan ID\x3d'",a.tId,t.id.CHECK,"' class\x3d'",u.makeChkClass(g,a),"' treeNode",t.id.CHECK,!0===a.nocheck?" style\x3d'display:none;'":"","\x3e\x3c/span\x3e"))});v.addZTreeTools(function(g,a){a.checkNode=function(a,b,f,e){var g=this.setting.data.key.checked;!0!==a.chkDisabled&&(!0!==b&&!1!==b&&(b=!a[g]),e=!!e,a[g]===b&&!f||e&&0==r.apply(this.setting.callback.beforeCheck,[this.setting.treeId,a],!0)||!r.uCanDo(this.setting)||!this.setting.check.enable||!0===a.nocheck||(a[g]=b,b=B(a,t.id.CHECK,this.setting),(f||this.setting.check.chkStyle===t.radio.STYLE)&&u.checkNodeRelation(this.setting,a),u.setChkClass(this.setting,b,a),u.repairParentChkClassWithSelf(this.setting,a),e&&this.setting.treeObj.trigger(t.event.CHECK,[null,this.setting.treeId,a])))};a.checkAllNodes=function(a){u.repairAllChk(this.setting,!!a)};a.getCheckedNodes=function(a){var b=this.setting.data.key.children;a=!1!==a;return v.getTreeCheckedNodes(this.setting,v.getRoot(this.setting)[b],a)};a.getChangeCheckedNodes=function(){var a=this.setting.data.key.children;return v.getTreeChangeCheckedNodes(this.setting,v.getRoot(this.setting)[a])};a.setChkDisabled=function(a,b,f,e){b=!!b;f=!!f;u.repairSonChkDisabled(this.setting,a,b,!!e);u.repairParentChkDisabled(this.setting,a.getParentNode(),b,f)};var b=a.updateNode;a.updateNode=function(c,n){b&&b.apply(a,arguments);if(c&&this.setting.check.enable&&B(c,this.setting).get(0)&&r.uCanDo(this.setting)){var f=B(c,t.id.CHECK,this.setting);1!=n&&this.setting.check.chkStyle!==t.radio.STYLE||u.checkNodeRelation(this.setting,c);u.setChkClass(this.setting,f,c);u.repairParentChkClassWithSelf(this.setting,c)}}});var M=u.createNodes;u.createNodes=function(g,a,b,c,n){M&&M.apply(u,arguments);b&&u.repairParentChkClassWithSelf(g,c)};var K=u.removeNode;u.removeNode=function(g,a){var b=a.getParentNode();K&&K.apply(u,arguments);a&&b&&(u.repairChkClass(g,b),u.repairParentChkClass(g,b))};var L=u.appendNodes;u.appendNodes=function(g,a,b,c,n,f,e){var r="";L&&(r=L.apply(u,arguments));c&&v.makeChkFlag(g,c);return r}})(jQuery);(function(z){var H={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},I={onHoverOverNode:function(a,b){var c=t.getSetting(a.data.treeId),n=t.getRoot(c);if(n.curHoverNode!=b)I.onHoverOutNode(a);n.curHoverNode=b;r.addHoverDom(c,b)},onHoverOutNode:function(a,b){var c=t.getSetting(a.data.treeId),n=t.getRoot(c);n.curHoverNode&&!t.isSelectedNode(c,n.curHoverNode)&&(r.removeTreeDom(c,n.curHoverNode),n.curHoverNode=null)},onMousedownNode:function(a,b){function c(a){if(0==p.dragFlag&&Math.abs(V-a.clientX)<k.edit.drag.minMoveSize&&Math.abs(W-a.clientY)<k.edit.drag.minMoveSize)return!0;var b,c,d,e,f;f=k.data.key.children;B.css("cursor","pointer");if(0==p.dragFlag){if(0==w.apply(k.callback.beforeDrag,[k.treeId,h],!0))return n(a),!0;b=0;for(c=h.length;b<c;b++)0==b&&(p.dragNodeShowBefore=[]),d=h[b],d.isParent&&d.open?(r.expandCollapseNode(k,d,!d.open),p.dragNodeShowBefore[d.tId]=!0):p.dragNodeShowBefore[d.tId]=!1;p.dragFlag=1;l.showHoverDom=!1;w.showIfameMask(k,!0);d=!0;e=-1;if(1<h.length){var m=h[0].parentTId?h[0].getParentNode()[f]:t.getNodes(k);f=[];b=0;for(c=m.length;b<c;b++)if(void 0!==p.dragNodeShowBefore[m[b].tId]&&(d&&-1<e&&e+1!==b&&(d=!1),f.push(m[b]),e=b),h.length===f.length){h=f;break}}d&&(K=h[0].getPreNode(),L=h[h.length-1].getNextNode());P=u("\x3cul class\x3d'zTreeDragUL'\x3e\x3c/ul\x3e",k);b=0;for(c=h.length;b<c;b++)d=h[b],d.editNameFlag=!1,r.selectNode(k,d,0<b),r.removeTreeDom(k,d),b>k.edit.drag.maxShowNodeNum-1||(e=u("\x3cli id\x3d'"+d.tId+"_tmp'\x3e\x3c/li\x3e",k),e.append(u(d,g.id.A,k).clone()),e.css("padding","0"),e.children("#"+d.tId+g.id.A).removeClass(g.node.CURSELECTED),P.append(e),b==k.edit.drag.maxShowNodeNum-1&&(e=u("\x3cli id\x3d'"+d.tId+"_moretmp'\x3e\x3ca\x3e  ...  \x3c/a\x3e\x3c/li\x3e",k),P.append(e)));P.attr("id",h[0].tId+g.id.UL+"_tmp");P.addClass(k.treeObj.attr("class"));P.appendTo(B);J=u("\x3cspan class\x3d'tmpzTreeMove_arrow'\x3e\x3c/span\x3e",k);J.attr("id","zTreeMove_arrow_tmp");J.appendTo(B);k.treeObj.trigger(g.event.DRAG,[a,k.treeId,h])}if(1==p.dragFlag){A&&J.attr("id")==a.target.id&&D&&a.clientX+q.scrollLeft()+2>z("#"+D+g.id.A,A).offset().left?(d=z("#"+D+g.id.A,A),a.target=0<d.length?d.get(0):a.target):A&&(A.removeClass(g.node.TMPTARGET_TREE),D&&z("#"+D+g.id.A,A).removeClass(g.node.TMPTARGET_NODE+"_"+g.move.TYPE_PREV).removeClass(g.node.TMPTARGET_NODE+"_"+H.move.TYPE_NEXT).removeClass(g.node.TMPTARGET_NODE+"_"+H.move.TYPE_INNER));D=A=null;I=!1;x=k;d=t.getSettings();for(var y in d)d[y].treeId&&d[y].edit.enable&&d[y].treeId!=k.treeId&&(a.target.id==d[y].treeId||0<z(a.target).parents("#"+d[y].treeId).length)&&(I=!0,x=d[y]);y=q.scrollTop();e=q.scrollLeft();f=x.treeObj.offset();b=x.treeObj.get(0).scrollHeight;d=x.treeObj.get(0).scrollWidth;c=a.clientY+y-f.top;var v=x.treeObj.height()+f.top-a.clientY-y,F=a.clientX+e-f.left,C=x.treeObj.width()+f.left-a.clientX-e;f=c<k.edit.drag.borderMax&&c>k.edit.drag.borderMin;var m=v<k.edit.drag.borderMax&&v>k.edit.drag.borderMin,O=F<k.edit.drag.borderMax&&F>k.edit.drag.borderMin,Q=C<k.edit.drag.borderMax&&C>k.edit.drag.borderMin,v=c>k.edit.drag.borderMin&&v>k.edit.drag.borderMin&&F>k.edit.drag.borderMin&&C>k.edit.drag.borderMin,F=f&&0>=x.treeObj.scrollTop(),C=m&&x.treeObj.scrollTop()+x.treeObj.height()+10>=b,R=O&&0>=x.treeObj.scrollLeft(),X=Q&&x.treeObj.scrollLeft()+x.treeObj.width()+10>=d;if(a.target&&w.isChildOrSelf(a.target,x.treeId)){for(var N=a.target;N&&N.tagName&&!w.eqs(N.tagName,"li")&&N.id!=x.treeId;)N=N.parentNode;var T=!0;b=0;for(c=h.length;b<c;b++)if(d=h[b],N.id===d.tId){T=!1;break}else if(0<u(d,k).find("#"+N.id).length){T=!1;break}T&&a.target&&w.isChildOrSelf(a.target,N.id+g.id.A)&&(A=z(N),D=N.id)}d=h[0];v&&w.isChildOrSelf(a.target,x.treeId)&&(!A&&(a.target.id==x.treeId||F||C||R||X)&&(I||!I&&d.parentTId)&&(A=x.treeObj),f?x.treeObj.scrollTop(x.treeObj.scrollTop()-10):m&&x.treeObj.scrollTop(x.treeObj.scrollTop()+10),O?x.treeObj.scrollLeft(x.treeObj.scrollLeft()-10):Q&&x.treeObj.scrollLeft(x.treeObj.scrollLeft()+10),A&&A!=x.treeObj&&A.offset().left<x.treeObj.offset().left&&x.treeObj.scrollLeft(x.treeObj.scrollLeft()+A.offset().left-x.treeObj.offset().left));P.css({top:a.clientY+y+3+"px",left:a.clientX+e+3+"px"});c=b=0;if(A&&A.attr("id")!=x.treeId){e=function(){A=null;D="";E=g.move.TYPE_INNER;J.css({display:"none"});window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)};var G=null==D?null:t.getNodeCache(x,D),m=(a.ctrlKey||a.metaKey)&&k.edit.drag.isMove&&k.edit.drag.isCopy||!k.edit.drag.isMove&&k.edit.drag.isCopy;f=!(!K||D!==K.tId);Q=!(!L||D!==L.tId);O=d.parentTId&&d.parentTId==D;d=(m||!Q)&&w.apply(x.edit.drag.prev,[x.treeId,h,G],!!x.edit.drag.prev);f=(m||!f)&&w.apply(x.edit.drag.next,[x.treeId,h,G],!!x.edit.drag.next);m=(m||!O)&&!(x.data.keep.leaf&&!G.isParent)&&w.apply(x.edit.drag.inner,[x.treeId,h,G],!!x.edit.drag.inner);if(d||f||m){if(O=z("#"+D+g.id.A,A),Q=G.isLastNode?null:z("#"+G.getNextNode().tId+g.id.A,A.next()),v=O.offset().top,F=O.offset().left,C=d?m?.25:f?.5:1:-1,R=f?m?.75:d?.5:0:-1,y=(a.clientY+y-v)/O.height(),(1==C||y<=C&&-.2<=y)&&d?(b=1-J.width(),c=v-J.height()/2,E=g.move.TYPE_PREV):(0==R||y>=R&&1.2>=y)&&f?(b=1-J.width(),c=null==Q||G.isParent&&G.open?v+O.height()-J.height()/2:Q.offset().top-J.height()/2,E=g.move.TYPE_NEXT):m?(b=5-J.width(),c=v,E=g.move.TYPE_INNER):e(),A){J.css({display:"block",top:c+"px",left:F+b+"px"});O.addClass(g.node.TMPTARGET_NODE+"_"+E);if(M!=D||S!=E)U=(new Date).getTime();G&&G.isParent&&E==g.move.TYPE_INNER&&(y=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==G.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===G.tId&&(y=!1),y&&(window.zTreeMoveTimer=setTimeout(function(){E==g.move.TYPE_INNER&&G&&G.isParent&&!G.open&&(new Date).getTime()-U>x.edit.drag.autoOpenTime&&w.apply(x.callback.beforeDragOpen,[x.treeId,G],!0)&&(r.switchNode(x,G),x.edit.drag.autoExpandTrigger&&x.treeObj.trigger(g.event.EXPAND,[x.treeId,G]))},x.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=G.tId))}}else e()}else E=g.move.TYPE_INNER,A&&w.apply(x.edit.drag.inner,[x.treeId,h,null],!!x.edit.drag.inner)?A.addClass(g.node.TMPTARGET_TREE):A=null,J.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);M=D;S=E;k.treeObj.trigger(g.event.DRAGMOVE,[a,k.treeId,h])}return!1}function n(a){window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);S=M=null;q.unbind("mousemove",c);q.unbind("mouseup",n);q.unbind("selectstart",f);B.css("cursor","auto");A&&(A.removeClass(g.node.TMPTARGET_TREE),D&&z("#"+D+g.id.A,A).removeClass(g.node.TMPTARGET_NODE+"_"+g.move.TYPE_PREV).removeClass(g.node.TMPTARGET_NODE+"_"+H.move.TYPE_NEXT).removeClass(g.node.TMPTARGET_NODE+"_"+H.move.TYPE_INNER));w.showIfameMask(k,!1);l.showHoverDom=!0;if(0!=p.dragFlag){p.dragFlag=0;var b,d,e;b=0;for(d=h.length;b<d;b++)e=h[b],e.isParent&&p.dragNodeShowBefore[e.tId]&&!e.open&&(r.expandCollapseNode(k,e,!e.open),delete p.dragNodeShowBefore[e.tId]);P&&P.remove();J&&J.remove();var m=(a.ctrlKey||a.metaKey)&&k.edit.drag.isMove&&k.edit.drag.isCopy||!k.edit.drag.isMove&&k.edit.drag.isCopy;!m&&A&&D&&h[0].parentTId&&D==h[0].parentTId&&E==g.move.TYPE_INNER&&(A=null);if(A){b=function(){if(I){if(!m)for(var b=0,c=h.length;b<c;b++)r.removeNode(k,h[b]);E==g.move.TYPE_INNER?r.addNodes(x,y,-1,v):r.addNodes(x,y.getParentNode(),E==g.move.TYPE_PREV?y.getIndex():y.getIndex()+1,v)}else if(m&&E==g.move.TYPE_INNER)r.addNodes(x,y,-1,v);else if(m)r.addNodes(x,y.getParentNode(),E==g.move.TYPE_PREV?y.getIndex():y.getIndex()+1,v);else if(E!=g.move.TYPE_NEXT)for(b=0,c=v.length;b<c;b++)r.moveNode(x,y,v[b],E,!1);else for(b=-1,c=v.length-1;b<c;c--)r.moveNode(x,y,v[c],E,!1);r.selectNodes(x,v);b=u(v[0],k).get(0);r.scrollIntoView(b);k.treeObj.trigger(g.event.DROP,[a,x.treeId,v,y,E,m])};var y=null==D?null:t.getNodeCache(x,D);if(0==w.apply(k.callback.beforeDrop,[x.treeId,h,y,E,m],!0))r.selectNodes(C,h);else{var v=m?w.clone(h):h;E==g.move.TYPE_INNER&&w.canAsync(x,y)?r.asyncNode(x,y,!1,b):b()}}else r.selectNodes(C,h),k.treeObj.trigger(g.event.DROP,[a,k.treeId,h,null,null,null])}}function f(){return!1}var e,m,k=t.getSetting(a.data.treeId),p=t.getRoot(k),l=t.getRoots();if(2==a.button||!k.edit.enable||!k.edit.drag.isCopy&&!k.edit.drag.isMove)return!0;var d=a.target,v=t.getRoot(k).curSelectedList,h=[];if(t.isSelectedNode(k,b))for(e=0,m=v.length;e<m;e++){if(v[e].editNameFlag&&w.eqs(d.tagName,"input")&&null!==d.getAttribute("treeNode"+g.id.INPUT))return!0;h.push(v[e]);if(h[0].parentTId!==v[e].parentTId){h=[b];break}}else h=[b];r.editNodeBlur=!0;r.cancelCurEditNode(k);var q=z(k.treeObj.get(0).ownerDocument),B=z(k.treeObj.get(0).ownerDocument.body),P,J,A,I=!1,x=k,C=k,K,L,M=null,S=null,D=null,E=g.move.TYPE_INNER,V=a.clientX,W=a.clientY,U=(new Date).getTime();w.uCanDo(k)&&q.bind("mousemove",c);q.bind("mouseup",n);q.bind("selectstart",f);a.preventDefault&&a.preventDefault();return!0}};z.extend(!0,z.fn.zTree.consts,H);z.extend(!0,z.fn.zTree._z,{tools:{getAbs:function(a){a=a.getBoundingClientRect();return[a.left+(document.body.scrollLeft+document.documentElement.scrollLeft),a.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(a){a.get(0)&&(a.focus(),w.setCursorPosition(a.get(0),a.val().length))},inputSelect:function(a){a.get(0)&&(a.focus(),a.select())},setCursorPosition:function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",b);c.select()}},showIfameMask:function(a,b){for(var c=t.getRoot(a);0<c.dragMaskList.length;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(b)for(var n=u("iframe",a),f=0,e=n.length;f<e;f++){var g=n.get(f),k=w.getAbs(g),g=u("\x3cdiv id\x3d'zTreeMask_"+f+"' class\x3d'zTreeMask' style\x3d'top:"+k[1]+"px; left:"+k[0]+"px; width:"+g.offsetWidth+"px; height:"+g.offsetHeight+"px;'\x3e\x3c/div\x3e",a);g.appendTo(u("body",a));c.dragMaskList.push(g)}}},view:{addEditBtn:function(a,b){if(!(b.editNameFlag||0<u(b,g.id.EDIT,a).length)&&w.apply(a.edit.showRenameBtn,[a.treeId,b],a.edit.showRenameBtn)){var c=u(b,g.id.A,a),n="\x3cspan class\x3d'"+g.className.BUTTON+" edit' id\x3d'"+b.tId+g.id.EDIT+"' title\x3d'"+w.apply(a.edit.renameTitle,[a.treeId,b],a.edit.renameTitle)+"' treeNode"+g.id.EDIT+" style\x3d'display:none;'\x3e\x3c/span\x3e";c.append(n);u(b,g.id.EDIT,a).bind("click",function(){if(!w.uCanDo(a)||0==w.apply(a.callback.beforeEditName,[a.treeId,b],!0))return!1;r.editNode(a,b);return!1}).show()}},addRemoveBtn:function(a,b){if(!(b.editNameFlag||0<u(b,g.id.REMOVE,a).length)&&w.apply(a.edit.showRemoveBtn,[a.treeId,b],a.edit.showRemoveBtn)){var c=u(b,g.id.A,a),n="\x3cspan class\x3d'"+g.className.BUTTON+" remove' id\x3d'"+b.tId+g.id.REMOVE+"' title\x3d'"+w.apply(a.edit.removeTitle,[a.treeId,b],a.edit.removeTitle)+"' treeNode"+g.id.REMOVE+" style\x3d'display:none;'\x3e\x3c/span\x3e";c.append(n);u(b,g.id.REMOVE,a).bind("click",function(){if(!w.uCanDo(a)||0==w.apply(a.callback.beforeRemove,[a.treeId,b],!0))return!1;r.removeNode(a,b);a.treeObj.trigger(g.event.REMOVE,[a.treeId,b]);return!1}).bind("mousedown",function(a){return!0}).show()}},addHoverDom:function(a,b){t.getRoots().showHoverDom&&(b.isHover=!0,a.edit.enable&&(r.addEditBtn(a,b),r.addRemoveBtn(a,b)),w.apply(a.view.addHoverDom,[a.treeId,b]))},cancelCurEditNode:function(a,b,c){var n=t.getRoot(a),f=a.data.key.name,e=n.curEditNode;if(e){var m=n.curEditInput;b=b?b:c?e[f]:m.val();if(!1===w.apply(a.callback.beforeRename,[a.treeId,e,b,c],!0))return!1;e[f]=b;u(e,g.id.A,a).removeClass(g.node.CURSELECTED_EDIT);m.unbind();r.setNodeName(a,e);e.editNameFlag=!1;n.curEditNode=null;n.curEditInput=null;r.selectNode(a,e,!1);a.treeObj.trigger(g.event.RENAME,[a.treeId,e,c])}return n.noSelection=!0},editNode:function(a,b){var c=t.getRoot(a);r.editNodeBlur=!1;if(t.isSelectedNode(a,b)&&c.curEditNode==b&&b.editNameFlag)setTimeout(function(){w.inputFocus(c.curEditInput)},0);else{var n=a.data.key.name;b.editNameFlag=!0;r.removeTreeDom(a,b);r.cancelCurEditNode(a);r.selectNode(a,b,!1);u(b,g.id.SPAN,a).html("\x3cinput type\x3dtext class\x3d'rename' id\x3d'"+b.tId+g.id.INPUT+"' treeNode"+g.id.INPUT+" \x3e");var f=u(b,g.id.INPUT,a);f.attr("value",b[n]);a.edit.editNameSelectAll?w.inputSelect(f):w.inputFocus(f);f.bind("blur",function(b){r.editNodeBlur||r.cancelCurEditNode(a)}).bind("keydown",function(b){"13"==b.keyCode?(r.editNodeBlur=!0,r.cancelCurEditNode(a)):"27"==b.keyCode&&r.cancelCurEditNode(a,null,!0)}).bind("click",function(a){return!1}).bind("dblclick",function(a){return!1});u(b,g.id.A,a).addClass(g.node.CURSELECTED_EDIT);c.curEditInput=f;c.noSelection=!1;c.curEditNode=b}},moveNode:function(a,b,c,n,f,e){var m=t.getRoot(a),k=a.data.key.children;if(b!=c&&(!a.data.keep.leaf||!b||b.isParent||n!=g.move.TYPE_INNER)){var p=c.parentTId?c.getParentNode():m,l=null===b||b==m;l&&null===b&&(b=m);l&&(n=g.move.TYPE_INNER);m=b.parentTId?b.getParentNode():m;n!=g.move.TYPE_PREV&&n!=g.move.TYPE_NEXT&&(n=g.move.TYPE_INNER);n==g.move.TYPE_INNER&&(l?c.parentTId=null:(b.isParent||(b.isParent=!0,b.open=!!b.open,r.setNodeLineIcos(a,b)),c.parentTId=b.tId));var d;l?d=l=a.treeObj:(e||n!=g.move.TYPE_INNER?e||r.expandCollapseNode(a,b.getParentNode(),!0,!1):r.expandCollapseNode(a,b,!0,!1),l=u(b,a),d=u(b,g.id.UL,a),l.get(0)&&!d.get(0)&&(d=[],r.makeUlHtml(a,b,d,""),l.append(d.join(""))),d=u(b,g.id.UL,a));var v=u(c,a);v.get(0)?l.get(0)||v.remove():v=r.appendNodes(a,c.level,[c],null,-1,!1,!0).join("");d.get(0)&&n==g.move.TYPE_INNER?d.append(v):l.get(0)&&n==g.move.TYPE_PREV?l.before(v):l.get(0)&&n==g.move.TYPE_NEXT&&l.after(v);var h=-1,q=0,w=null,l=null,z=c.level;if(c.isFirstNode)h=0,1<p[k].length&&(w=p[k][1],w.isFirstNode=!0);else if(c.isLastNode)h=p[k].length-1,w=p[k][h-1],w.isLastNode=!0;else for(d=0,v=p[k].length;d<v;d++)if(p[k][d].tId==c.tId){h=d;break}0<=h&&p[k].splice(h,1);if(n!=g.move.TYPE_INNER)for(d=0,v=m[k].length;d<v;d++)m[k][d].tId==b.tId&&(q=d);n==g.move.TYPE_INNER?(b[k]||(b[k]=[]),0<b[k].length&&(l=b[k][b[k].length-1],l.isLastNode=!1),b[k].splice(b[k].length,0,c),c.isLastNode=!0,c.isFirstNode=1==b[k].length):b.isFirstNode&&n==g.move.TYPE_PREV?(m[k].splice(q,0,c),l=b,l.isFirstNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!0,c.isLastNode=!1):b.isLastNode&&n==g.move.TYPE_NEXT?(m[k].splice(q+1,0,c),l=b,l.isLastNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(n==g.move.TYPE_PREV?m[k].splice(q,0,c):m[k].splice(q+1,0,c),c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!1);t.fixPIdKeyValue(a,c);t.setSonNodeLevel(a,c.getParentNode(),c);r.setNodeLineIcos(a,c);r.repairNodeLevelClass(a,c,z);!a.data.keep.parent&&1>p[k].length?(p.isParent=!1,p.open=!1,b=u(p,g.id.UL,a),n=u(p,g.id.SWITCH,a),k=u(p,g.id.ICON,a),r.replaceSwitchClass(p,n,g.folder.DOCU),r.replaceIcoClass(p,k,g.folder.DOCU),b.css("display","none")):w&&r.setNodeLineIcos(a,w);l&&r.setNodeLineIcos(a,l);a.check&&a.check.enable&&r.repairChkClass&&(r.repairChkClass(a,p),r.repairParentChkClassWithSelf(a,p),p!=c.parent&&r.repairParentChkClassWithSelf(a,c));e||r.expandCollapseParentNode(a,c.getParentNode(),!0,f)}},removeEditBtn:function(a,b){u(b,g.id.EDIT,a).unbind().remove()},removeRemoveBtn:function(a,b){u(b,g.id.REMOVE,a).unbind().remove()},removeTreeDom:function(a,b){b.isHover=!1;r.removeEditBtn(a,b);r.removeRemoveBtn(a,b);w.apply(a.view.removeHoverDom,[a.treeId,b])},repairNodeLevelClass:function(a,b,c){if(c!==b.level){var n=u(b,a),f=u(b,g.id.A,a);a=u(b,g.id.UL,a);c=g.className.LEVEL+c;b=g.className.LEVEL+b.level;n.removeClass(c);n.addClass(b);f.removeClass(c);f.addClass(b);a.removeClass(c);a.addClass(b)}},selectNodes:function(a,b){for(var c=0,g=b.length;c<g;c++)r.selectNode(a,b[c],0<c)}},event:{},data:{setSonNodeLevel:function(a,b,c){if(c){var g=a.data.key.children;c.level=b?b.level+1:0;if(c[g]){b=0;for(var f=c[g].length;b<f;b++)c[g][b]&&t.setSonNodeLevel(a,c,c[g][b])}}}}});var C=z.fn.zTree,w=C._z.tools,g=C.consts,r=C._z.view,t=C._z.data,u=w.$;t.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}});t.addInitBind(function(a){var b=a.treeObj,c=g.event;b.bind(c.RENAME,function(b,c,e,g){w.apply(a.callback.onRename,[b,c,e,g])});b.bind(c.DRAG,function(b,c,e,g){w.apply(a.callback.onDrag,[c,e,g])});b.bind(c.DRAGMOVE,function(b,c,e,g){w.apply(a.callback.onDragMove,[c,e,g])});b.bind(c.DROP,function(b,c,e,g,k,m,l){w.apply(a.callback.onDrop,[c,e,g,k,m,l])})});t.addInitUnBind(function(a){a=a.treeObj;var b=g.event;a.unbind(b.RENAME);a.unbind(b.DRAG);a.unbind(b.DRAGMOVE);a.unbind(b.DROP)});t.addInitCache(function(a){});t.addInitNode(function(a,b,c,g,f,e,m){c&&(c.isHover=!1,c.editNameFlag=!1)});t.addInitProxy(function(a){var b=a.target,c=t.getSetting(a.data.treeId),n=a.relatedTarget,f="",e=null,m="",k=null,p=null;if(w.eqs(a.type,"mouseover")){if(p=w.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+g.id.A}]))f=w.getNodeMainDom(p).id,m="hoverOverNode"}else w.eqs(a.type,"mouseout")?(p=w.getMDom(c,n,[{tagName:"a",attrName:"treeNode"+g.id.A}]),p||(f="remove",m="hoverOutNode")):w.eqs(a.type,"mousedown")&&(p=w.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+g.id.A}]))&&(f=w.getNodeMainDom(p).id,m="mousedownNode");if(0<f.length)switch(e=t.getNodeCache(c,f),m){case "mousedownNode":k=I.onMousedownNode;break;case "hoverOverNode":k=I.onHoverOverNode;break;case "hoverOutNode":k=I.onHoverOutNode}return{stop:!1,node:e,nodeEventType:m,nodeEventCallback:k,treeEventType:"",treeEventCallback:null}});t.addInitRoot(function(a){a=t.getRoot(a);var b=t.getRoots();a.curEditNode=null;a.curEditInput=null;a.curHoverNode=null;a.dragFlag=0;a.dragNodeShowBefore=[];a.dragMaskList=[];b.showHoverDom=!0});t.addZTreeTools(function(a,b){b.cancelEditName=function(a){t.getRoot(this.setting).curEditNode&&r.cancelCurEditNode(this.setting,a?a:null,!0)};b.copyNode=function(a,b,f,e){if(!b||a&&!a.isParent&&this.setting.data.keep.leaf&&f===g.move.TYPE_INNER)return null;var m=this,k=w.clone(b);a||(a=null,f=g.move.TYPE_INNER);f==g.move.TYPE_INNER?(b=function(){r.addNodes(m.setting,a,-1,[k],e)},w.canAsync(this.setting,a)?r.asyncNode(this.setting,a,e,b):b()):(r.addNodes(this.setting,a.parentNode,-1,[k],e),r.moveNode(this.setting,a,k,f,!1,e));return k};b.editName=function(a){a&&a.tId&&a===t.getNodeCache(this.setting,a.tId)&&(a.parentTId&&r.expandCollapseParentNode(this.setting,a.getParentNode(),!0),r.editNode(this.setting,a))};b.moveNode=function(a,b,f,e){function m(){r.moveNode(k.setting,a,b,f,!1,e)}if(!b)return b;if(a&&!a.isParent&&this.setting.data.keep.leaf&&f===g.move.TYPE_INNER||a&&(b.parentTId==a.tId&&f==g.move.TYPE_INNER||0<u(b,this.setting).find("#"+a.tId).length))return null;a||(a=null);var k=this;w.canAsync(this.setting,a)&&f===g.move.TYPE_INNER?r.asyncNode(this.setting,a,e,m):m();return b};b.setEditable=function(a){this.setting.edit.enable=a;return this.refresh()}});var v=r.cancelPreSelectedNode;r.cancelPreSelectedNode=function(a,b){for(var c=t.getRoot(a).curSelectedList,g=0,f=c.length;g<f;g++)if(!b||b===c[g])if(r.removeTreeDom(a,c[g]),b)break;v&&v.apply(r,arguments)};var B=r.createNodes;r.createNodes=function(a,b,c,g,f){B&&B.apply(r,arguments);c&&r.repairParentChkClassWithSelf&&r.repairParentChkClassWithSelf(a,g)};var M=r.makeNodeUrl;r.makeNodeUrl=function(a,b){return a.edit.enable?null:M.apply(r,arguments)};var K=r.removeNode;r.removeNode=function(a,b){var c=t.getRoot(a);c.curEditNode===b&&(c.curEditNode=null);K&&K.apply(r,arguments)};var L=r.selectNode;r.selectNode=function(a,b,c){var g=t.getRoot(a);if(t.isSelectedNode(a,b)&&g.curEditNode==b&&b.editNameFlag)return!1;L&&L.apply(r,arguments);r.addHoverDom(a,b);return!0};var m=w.uCanDo;w.uCanDo=function(a,b){var c=t.getRoot(a);if(b&&(w.eqs(b.type,"mouseover")||w.eqs(b.type,"mouseout")||w.eqs(b.type,"mousedown")||w.eqs(b.type,"mouseup")))return!0;c.curEditNode&&(r.editNodeBlur=!1,c.curEditInput.focus());return!c.curEditNode&&(m?m.apply(r,arguments):!0)}})(jQuery);