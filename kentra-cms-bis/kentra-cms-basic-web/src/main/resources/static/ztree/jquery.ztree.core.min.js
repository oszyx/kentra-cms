/*
 * JQuery zTree core v3.5.28
 * http://treejs.cn/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2017-01-20
 */(function(u){var x={},A={},B={},N={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},C=[function(b){var a=b.treeObj,c=f.event;a.bind(c.NODECREATED,function(a,c,g){k.apply(b.callback.onNodeCreated,[a,c,g])});a.bind(c.CLICK,function(a,c,g,n,h){k.apply(b.callback.onClick,[c,g,n,h])});a.bind(c.EXPAND,function(a,c,g){k.apply(b.callback.onExpand,[a,c,g])});a.bind(c.COLLAPSE,function(a,c,g){k.apply(b.callback.onCollapse,[a,c,g])});a.bind(c.ASYNC_SUCCESS,function(a,c,g,n){k.apply(b.callback.onAsyncSuccess,[a,c,g,n])});a.bind(c.ASYNC_ERROR,function(a,c,g,n,h,f){k.apply(b.callback.onAsyncError,[a,c,g,n,h,f])});a.bind(c.REMOVE,function(a,c,g){k.apply(b.callback.onRemove,[a,c,g])});a.bind(c.SELECTED,function(a,c,g){k.apply(b.callback.onSelected,[c,g])});a.bind(c.UNSELECTED,function(a,c,g){k.apply(b.callback.onUnSelected,[c,g])})}],D=[function(b){var a=f.event;b.treeObj.unbind(a.NODECREATED).unbind(a.CLICK).unbind(a.EXPAND).unbind(a.COLLAPSE).unbind(a.ASYNC_SUCCESS).unbind(a.ASYNC_ERROR).unbind(a.REMOVE).unbind(a.SELECTED).unbind(a.UNSELECTED)}],E=[function(b){var a=h.getCache(b);a||(a={},h.setCache(b,a));a.nodes=[];a.doms=[]}],F=[function(b,a,c,d,e,g,n){if(c){n=h.getRoot(b);var f=b.data.key.children;c.level=a;c.tId=b.treeId+"_"+ ++n.zId;c.parentTId=d?d.tId:null;c.open="string"==typeof c.open?k.eqs(c.open,"true"):!!c.open;c[f]&&0<c[f].length?(c.isParent=!0,c.zAsync=!0):(c.isParent="string"==typeof c.isParent?k.eqs(c.isParent,"true"):!!c.isParent,c.open=c.isParent&&!b.async.enable?c.open:!1,c.zAsync=!c.isParent);c.isFirstNode=e;c.isLastNode=g;c.getParentNode=function(){return h.getNodeCache(b,c.parentTId)};c.getPreNode=function(){return h.getPreNode(b,c)};c.getNextNode=function(){return h.getNextNode(b,c)};c.getIndex=function(){return h.getNodeIndex(b,c)};c.getPath=function(){return h.getNodePath(b,c)};c.isAjaxing=!1;h.fixPIdKeyValue(b,c)}}],z=[function(b){var a=b.target,c=h.getSetting(b.data.treeId),d="",e=null,g="",n="",l=null,q=null,m=null;if(k.eqs(b.type,"mousedown"))n="mousedown";else if(k.eqs(b.type,"mouseup"))n="mouseup";else if(k.eqs(b.type,"contextmenu"))n="contextmenu";else if(k.eqs(b.type,"click"))if(k.eqs(a.tagName,"span")&&null!==a.getAttribute("treeNode"+f.id.SWITCH))d=k.getNodeMainDom(a).id,g="switchNode";else{if(m=k.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+f.id.A}]))d=k.getNodeMainDom(m).id,g="clickNode"}else k.eqs(b.type,"dblclick")&&(n="dblclick",m=k.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+f.id.A}]))&&(d=k.getNodeMainDom(m).id,g="switchNode");0<n.length&&0==d.length&&(m=k.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+f.id.A}]))&&(d=k.getNodeMainDom(m).id);if(0<d.length)switch(e=h.getNodeCache(c,d),g){case "switchNode":e.isParent?k.eqs(b.type,"click")||k.eqs(b.type,"dblclick")&&k.apply(c.view.dblClickExpand,[c.treeId,e],c.view.dblClickExpand)?l=v.onSwitchNode:g="":g="";break;case "clickNode":l=v.onClickNode}switch(n){case "mousedown":q=v.onZTreeMousedown;break;case "mouseup":q=v.onZTreeMouseup;break;case "dblclick":q=v.onZTreeDblclick;break;case "contextmenu":q=v.onZTreeContextmenu}return{stop:!1,node:e,nodeEventType:g,nodeEventCallback:l,treeEventType:n,treeEventCallback:q}}],H=[function(b){var a=h.getRoot(b);a||(a={},h.setRoot(b,a));a[b.data.key.children]=[];a.expandTriggerFlag=!1;a.curSelectedList=[];a.noSelection=!0;a.createdNodes=[];a.zId=0;a._ver=(new Date).getTime()}],I=[],J=[],K=[],L=[],M=[],h={addNodeCache:function(b,a){h.getCache(b).nodes[h.getNodeCacheId(a.tId)]=a},getNodeCacheId:function(b){return b.substring(b.lastIndexOf("_")+1)},addAfterA:function(b){J.push(b)},addBeforeA:function(b){I.push(b)},addInnerAfterA:function(b){L.push(b)},addInnerBeforeA:function(b){K.push(b)},addInitBind:function(b){C.push(b)},addInitUnBind:function(b){D.push(b)},addInitCache:function(b){E.push(b)},addInitNode:function(b){F.push(b)},addInitProxy:function(b,a){a?z.splice(0,0,b):z.push(b)},addInitRoot:function(b){H.push(b)},addNodesData:function(b,a,c,d){var e=b.data.key.children;a[e]?c>=a[e].length&&(c=-1):(a[e]=[],c=-1);0<a[e].length&&0===c?(a[e][0].isFirstNode=!1,l.setNodeLineIcos(b,a[e][0])):0<a[e].length&&0>c&&(a[e][a[e].length-1].isLastNode=!1,l.setNodeLineIcos(b,a[e][a[e].length-1]));a.isParent=!0;0>c?a[e]=a[e].concat(d):(b=[c,0].concat(d),a[e].splice.apply(a[e],b))},addSelectedNode:function(b,a){var c=h.getRoot(b);h.isSelectedNode(b,a)||c.curSelectedList.push(a)},addCreatedNode:function(b,a){(b.callback.onNodeCreated||b.view.addDiyDom)&&h.getRoot(b).createdNodes.push(a)},addZTreeTools:function(b){M.push(b)},exSetting:function(b){u.extend(!0,N,b)},fixPIdKeyValue:function(b,a){b.data.simpleData.enable&&(a[b.data.simpleData.pIdKey]=a.parentTId?a.getParentNode()[b.data.simpleData.idKey]:b.data.simpleData.rootPId)},getAfterA:function(b,a,c){for(var d=0,e=J.length;d<e;d++)J[d].apply(this,arguments)},getBeforeA:function(b,a,c){for(var d=0,e=I.length;d<e;d++)I[d].apply(this,arguments)},getInnerAfterA:function(b,a,c){for(var d=0,e=L.length;d<e;d++)L[d].apply(this,arguments)},getInnerBeforeA:function(b,a,c){for(var d=0,e=K.length;d<e;d++)K[d].apply(this,arguments)},getCache:function(b){return B[b.treeId]},getNodeIndex:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),e=0,g=d[c].length-1;e<=g;e++)if(d[c][e]===a)return e;return-1},getNextNode:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),e=0,g=d[c].length-1;e<=g;e++)if(d[c][e]===a)return e==g?null:d[c][e+1];return null},getNodeByParam:function(b,a,c,d){if(!a||!c)return null;for(var e=b.data.key.children,g=0,n=a.length;g<n;g++){if(a[g][c]==d)return a[g];var f=h.getNodeByParam(b,a[g][e],c,d);if(f)return f}return null},getNodeCache:function(b,a){if(!a)return null;var c=B[b.treeId].nodes[h.getNodeCacheId(a)];return c?c:null},getNodeName:function(b,a){return""+a[b.data.key.name]},getNodePath:function(b,a){if(!a)return null;var c;(c=a.parentTId?a.getParentNode().getPath():[])&&c.push(a);return c},getNodeTitle:function(b,a){return""+a[""===b.data.key.title?b.data.key.name:b.data.key.title]},getNodes:function(b){return h.getRoot(b)[b.data.key.children]},getNodesByParam:function(b,a,c,d){if(!a||!c)return[];for(var e=b.data.key.children,g=[],n=0,f=a.length;n<f;n++)a[n][c]==d&&g.push(a[n]),g=g.concat(h.getNodesByParam(b,a[n][e],c,d));return g},getNodesByParamFuzzy:function(b,a,c,d){if(!a||!c)return[];var e=b.data.key.children,g=[];d=d.toLowerCase();for(var n=0,f=a.length;n<f;n++)"string"==typeof a[n][c]&&-1<a[n][c].toLowerCase().indexOf(d)&&g.push(a[n]),g=g.concat(h.getNodesByParamFuzzy(b,a[n][e],c,d));return g},getNodesByFilter:function(b,a,c,d,e){if(!a)return d?null:[];for(var g=b.data.key.children,n=d?null:[],f=0,l=a.length;f<l;f++){if(k.apply(c,[a[f],e],!1)){if(d)return a[f];n.push(a[f])}var m=h.getNodesByFilter(b,a[f][g],c,d,e);if(d&&m)return m;n=d?m:n.concat(m)}return n},getPreNode:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),e=0,g=d[c].length;e<g;e++)if(d[c][e]===a)return 0==e?null:d[c][e-1];return null},getRoot:function(b){return b?A[b.treeId]:null},getRoots:function(){return A},getSetting:function(b){return x[b]},getSettings:function(){return x},getZTreeTools:function(b){return(b=this.getRoot(this.getSetting(b)))?b.treeTools:null},initCache:function(b){for(var a=0,c=E.length;a<c;a++)E[a].apply(this,arguments)},initNode:function(b,a,c,d,e,g){for(var f=0,h=F.length;f<h;f++)F[f].apply(this,arguments)},initRoot:function(b){for(var a=0,c=H.length;a<c;a++)H[a].apply(this,arguments)},isSelectedNode:function(b,a){for(var c=h.getRoot(b),d=0,e=c.curSelectedList.length;d<e;d++)if(a===c.curSelectedList[d])return!0;return!1},removeNodeCache:function(b,a){var c=b.data.key.children;if(a[c])for(var d=0,e=a[c].length;d<e;d++)h.removeNodeCache(b,a[c][d]);h.getCache(b).nodes[h.getNodeCacheId(a.tId)]=null},removeSelectedNode:function(b,a){for(var c=h.getRoot(b),d=0,e=c.curSelectedList.length;d<e;d++)a!==c.curSelectedList[d]&&h.getNodeCache(b,c.curSelectedList[d].tId)||(c.curSelectedList.splice(d,1),b.treeObj.trigger(f.event.UNSELECTED,[b.treeId,a]),d--,e--)},setCache:function(b,a){B[b.treeId]=a},setRoot:function(b,a){A[b.treeId]=a},setZTreeTools:function(b,a){for(var c=0,d=M.length;c<d;c++)M[c].apply(this,arguments)},transformToArrayFormat:function(b,a){if(!a)return[];var c=b.data.key.children,d=[];if(k.isArray(a))for(var e=0,g=a.length;e<g;e++)d.push(a[e]),a[e][c]&&(d=d.concat(h.transformToArrayFormat(b,a[e][c])));else d.push(a),a[c]&&(d=d.concat(h.transformToArrayFormat(b,a[c])));return d},transformTozTreeFormat:function(b,a){var c,d,e=b.data.simpleData.idKey,g=b.data.simpleData.pIdKey,f=b.data.key.children;if(!e||""==e||!a)return[];if(k.isArray(a)){var h=[],l={};c=0;for(d=a.length;c<d;c++)l[a[c][e]]=a[c];c=0;for(d=a.length;c<d;c++)l[a[c][g]]&&a[c][e]!=a[c][g]?(l[a[c][g]][f]||(l[a[c][g]][f]=[]),l[a[c][g]][f].push(a[c])):h.push(a[c]);return h}return[a]}},p={bindEvent:function(b){for(var a=0,c=C.length;a<c;a++)C[a].apply(this,arguments)},unbindEvent:function(b){for(var a=0,c=D.length;a<c;a++)D[a].apply(this,arguments)},bindTree:function(b){var a={treeId:b.treeId},c=b.treeObj;b.view.txtSelectedEnable||c.bind("selectstart",v.onSelectStart).css({"-moz-user-select":"-moz-none"});c.bind("click",a,p.proxy);c.bind("dblclick",a,p.proxy);c.bind("mouseover",a,p.proxy);c.bind("mouseout",a,p.proxy);c.bind("mousedown",a,p.proxy);c.bind("mouseup",a,p.proxy);c.bind("contextmenu",a,p.proxy)},unbindTree:function(b){b.treeObj.unbind("selectstart",v.onSelectStart).unbind("click",p.proxy).unbind("dblclick",p.proxy).unbind("mouseover",p.proxy).unbind("mouseout",p.proxy).unbind("mousedown",p.proxy).unbind("mouseup",p.proxy).unbind("contextmenu",p.proxy)},doProxy:function(b){for(var a=[],c=0,d=z.length;c<d;c++){var e=z[c].apply(this,arguments);a.push(e);if(e.stop)break}return a},proxy:function(b){var a=h.getSetting(b.data.treeId);if(!k.uCanDo(a,b))return!0;for(var a=p.doProxy(b),c=!0,d=0,e=a.length;d<e;d++){var g=a[d];g.nodeEventCallback&&(c=g.nodeEventCallback.apply(g,[b,g.node])&&c);g.treeEventCallback&&(c=g.treeEventCallback.apply(g,[b,g.node])&&c)}return c}},v={onSwitchNode:function(b,a){var c=h.getSetting(b.data.treeId);if(a.open){if(0==k.apply(c.callback.beforeCollapse,[c.treeId,a],!0))return!0}else if(0==k.apply(c.callback.beforeExpand,[c.treeId,a],!0))return!0;h.getRoot(c).expandTriggerFlag=!0;l.switchNode(c,a);return!0},onClickNode:function(b,a){var c=h.getSetting(b.data.treeId),d=c.view.autoCancelSelected&&(b.ctrlKey||b.metaKey)&&h.isSelectedNode(c,a)?0:c.view.autoCancelSelected&&(b.ctrlKey||b.metaKey)&&c.view.selectedMulti?2:1;if(0==k.apply(c.callback.beforeClick,[c.treeId,a,d],!0))return!0;0===d?l.cancelPreSelectedNode(c,a):l.selectNode(c,a,2===d);c.treeObj.trigger(f.event.CLICK,[b,c.treeId,a,d]);return!0},onZTreeMousedown:function(b,a){var c=h.getSetting(b.data.treeId);k.apply(c.callback.beforeMouseDown,[c.treeId,a],!0)&&k.apply(c.callback.onMouseDown,[b,c.treeId,a]);return!0},onZTreeMouseup:function(b,a){var c=h.getSetting(b.data.treeId);k.apply(c.callback.beforeMouseUp,[c.treeId,a],!0)&&k.apply(c.callback.onMouseUp,[b,c.treeId,a]);return!0},onZTreeDblclick:function(b,a){var c=h.getSetting(b.data.treeId);k.apply(c.callback.beforeDblClick,[c.treeId,a],!0)&&k.apply(c.callback.onDblClick,[b,c.treeId,a]);return!0},onZTreeContextmenu:function(b,a){var c=h.getSetting(b.data.treeId);k.apply(c.callback.beforeRightClick,[c.treeId,a],!0)&&k.apply(c.callback.onRightClick,[b,c.treeId,a]);return"function"!=typeof c.callback.onRightClick},onSelectStart:function(b){b=b.originalEvent.srcElement.nodeName.toLowerCase();return"input"===b||"textarea"===b}},k={apply:function(b,a,c){return"function"==typeof b?b.apply(O,a?a:[]):c},canAsync:function(b,a){var c=b.data.key.children;return b.async.enable&&a&&a.isParent&&!(a.zAsync||a[c]&&0<a[c].length)},clone:function(b){if(null===b)return null;var a=k.isArray(b)?[]:{},c;for(c in b)a[c]=b[c]instanceof Date?new Date(b[c].getTime()):"object"===typeof b[c]?k.clone(b[c]):b[c];return a},eqs:function(b,a){return b.toLowerCase()===a.toLowerCase()},isArray:function(b){return"[object Array]"===Object.prototype.toString.apply(b)},isElement:function(b){return"object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&null!==b&&1===b.nodeType&&"string"===typeof b.nodeName},$:function(b,a,c){a&&"string"!=typeof a&&(c=a,a="");return"string"==typeof b?u(b,c?c.treeObj.get(0).ownerDocument:null):u("#"+b.tId+a,c?c.treeObj:null)},getMDom:function(b,a,c){if(!a)return null;for(;a&&a.id!==b.treeId;){for(var d=0,e=c.length;a.tagName&&d<e;d++)if(k.eqs(a.tagName,c[d].tagName)&&null!==a.getAttribute(c[d].attrName))return a;a=a.parentNode}return null},getNodeMainDom:function(b){return u(b).parent("li").get(0)||u(b).parentsUntil("li").parent().get(0)},isChildOrSelf:function(b,a){return 0<u(b).closest("#"+a).length},uCanDo:function(b,a){return!0}},l={addNodes:function(b,a,c,d,e){if(!b.data.keep.leaf||!a||a.isParent)if(k.isArray(d)||(d=[d]),b.data.simpleData.enable&&(d=h.transformTozTreeFormat(b,d)),a){var g=m(a,f.id.SWITCH,b),n=m(a,f.id.ICON,b),t=m(a,f.id.UL,b);a.open||(l.replaceSwitchClass(a,g,f.folder.CLOSE),l.replaceIcoClass(a,n,f.folder.CLOSE),a.open=!1,t.css({display:"none"}));h.addNodesData(b,a,c,d);l.createNodes(b,a.level+1,d,a,c);e||l.expandCollapseParentNode(b,a,!0)}else h.addNodesData(b,h.getRoot(b),c,d),l.createNodes(b,0,d,null,c)},appendNodes:function(b,a,c,d,e,g,f){if(!c)return[];var k=[],m=b.data.key.children,G=(d?d:h.getRoot(b))[m],w,p;if(!G||e>=G.length-c.length)e=-1;for(var y=0,P=c.length;y<P;y++){var r=c[y];g&&(w=(0===e||G.length==c.length)&&0==y,p=0>e&&y==c.length-1,h.initNode(b,a,r,d,w,p,f),h.addNodeCache(b,r));w=[];r[m]&&0<r[m].length&&(w=l.appendNodes(b,a+1,r[m],r,-1,g,f&&r.open));f&&(l.makeDOMNodeMainBefore(k,b,r),l.makeDOMNodeLine(k,b,r),h.getBeforeA(b,r,k),l.makeDOMNodeNameBefore(k,b,r),h.getInnerBeforeA(b,r,k),l.makeDOMNodeIcon(k,b,r),h.getInnerAfterA(b,r,k),l.makeDOMNodeNameAfter(k,b,r),h.getAfterA(b,r,k),r.isParent&&r.open&&l.makeUlHtml(b,r,k,w.join("")),l.makeDOMNodeMainAfter(k,b,r),h.addCreatedNode(b,r))}return k},appendParentULDom:function(b,a){var c=[],d=m(a,b);!d.get(0)&&a.parentTId&&(l.appendParentULDom(b,a.getParentNode()),d=m(a,b));var e=m(a,f.id.UL,b);e.get(0)&&e.remove();e=l.appendNodes(b,a.level+1,a[b.data.key.children],a,-1,!1,!0);l.makeUlHtml(b,a,c,e.join(""));d.append(c.join(""))},asyncNode:function(b,a,c,d){var e,g;if(a&&!a.isParent)return k.apply(d),!1;if(a&&a.isAjaxing)return!1;if(0==k.apply(b.callback.beforeAsync,[b.treeId,a],!0))return k.apply(d),!1;a&&(a.isAjaxing=!0,m(a,f.id.ICON,b).attr({style:"","class":f.className.BUTTON+" "+f.className.ICO_LOADING}));var n={};e=0;for(g=b.async.autoParam.length;a&&e<g;e++){var t=b.async.autoParam[e].split("\x3d"),q=t;1<t.length&&(q=t[1],t=t[0]);n[q]=a[t]}if(k.isArray(b.async.otherParam))for(e=0,g=b.async.otherParam.length;e<g;e+=2)n[b.async.otherParam[e]]=b.async.otherParam[e+1];else for(var p in b.async.otherParam)n[p]=b.async.otherParam[p];var w=h.getRoot(b)._ver;u.ajax({contentType:b.async.contentType,cache:!1,type:b.async.type,url:k.apply(b.async.url,[b.treeId,a],b.async.url),data:-1<b.async.contentType.indexOf("application/json")?JSON.stringify(n):n,dataType:b.async.dataType,success:function(e){if(w==h.getRoot(b)._ver){var g=[];try{g=e&&0!=e.length?"string"==typeof e?eval("("+e+")"):e:[]}catch(n){g=e}a&&(a.isAjaxing=null,a.zAsync=!0);l.setNodeLineIcos(b,a);g&&""!==g?(g=k.apply(b.async.dataFilter,[b.treeId,a,g],g),l.addNodes(b,a,-1,g?k.clone(g):[],!!c)):l.addNodes(b,a,-1,[],!!c);b.treeObj.trigger(f.event.ASYNC_SUCCESS,[b.treeId,a,e]);k.apply(d)}},error:function(c,d,e){w==h.getRoot(b)._ver&&(a&&(a.isAjaxing=null),l.setNodeLineIcos(b,a),b.treeObj.trigger(f.event.ASYNC_ERROR,[b.treeId,a,c,d,e]))}});return!0},cancelPreSelectedNode:function(b,a,c){var d=h.getRoot(b).curSelectedList,e,g;for(e=d.length-1;0<=e;e--)if(g=d[e],a===g||!(a||c&&c===g))if(m(g,f.id.A,b).removeClass(f.node.CURSELECTED),a){h.removeSelectedNode(b,a);break}else d.splice(e,1),b.treeObj.trigger(f.event.UNSELECTED,[b.treeId,g])},createNodeCallback:function(b){if(b.callback.onNodeCreated||b.view.addDiyDom)for(var a=h.getRoot(b);0<a.createdNodes.length;){var c=a.createdNodes.shift();k.apply(b.view.addDiyDom,[b.treeId,c]);b.callback.onNodeCreated&&b.treeObj.trigger(f.event.NODECREATED,[b.treeId,c])}},createNodes:function(b,a,c,d,e){if(c&&0!=c.length){var g=h.getRoot(b),n=b.data.key.children,n=!d||d.open||!!m(d[n][0],b).get(0);g.createdNodes=[];a=l.appendNodes(b,a,c,d,e,!0,n);var k,q;d?(d=m(d,f.id.UL,b),d.get(0)&&(k=d)):k=b.treeObj;k&&(0<=e&&(q=k.children()[e]),0<=e&&q?u(q).before(a.join("")):k.append(a.join("")));l.createNodeCallback(b)}},destroy:function(b){b&&(h.initCache(b),h.initRoot(b),p.unbindTree(b),p.unbindEvent(b),b.treeObj.empty(),delete x[b.treeId])},expandCollapseNode:function(b,a,c,d,e){var g=h.getRoot(b),n=b.data.key.children,t;if(a)if(g.expandTriggerFlag&&(t=e,e=function(){t&&t();a.open?b.treeObj.trigger(f.event.EXPAND,[b.treeId,a]):b.treeObj.trigger(f.event.COLLAPSE,[b.treeId,a])},g.expandTriggerFlag=!1),!a.open&&a.isParent&&(!m(a,f.id.UL,b).get(0)||a[n]&&0<a[n].length&&!m(a[n][0],b).get(0))&&(l.appendParentULDom(b,a),l.createNodeCallback(b)),a.open==c)k.apply(e,[]);else{c=m(a,f.id.UL,b);var g=m(a,f.id.SWITCH,b),q=m(a,f.id.ICON,b);a.isParent?(a.open=!a.open,a.iconOpen&&a.iconClose&&q.attr("style",l.makeNodeIcoStyle(b,a)),a.open?(l.replaceSwitchClass(a,g,f.folder.OPEN),l.replaceIcoClass(a,q,f.folder.OPEN),0==d||""==b.view.expandSpeed?(c.show(),k.apply(e,[])):a[n]&&0<a[n].length?c.slideDown(b.view.expandSpeed,e):(c.show(),k.apply(e,[]))):(l.replaceSwitchClass(a,g,f.folder.CLOSE),l.replaceIcoClass(a,q,f.folder.CLOSE),0!=d&&""!=b.view.expandSpeed&&a[n]&&0<a[n].length?c.slideUp(b.view.expandSpeed,e):(c.hide(),k.apply(e,[])))):k.apply(e,[])}else k.apply(e,[])},expandCollapseParentNode:function(b,a,c,d,e){a&&(a.parentTId?(l.expandCollapseNode(b,a,c,d),a.parentTId&&l.expandCollapseParentNode(b,a.getParentNode(),c,d,e)):l.expandCollapseNode(b,a,c,d,e))},expandCollapseSonNode:function(b,a,c,d,e){var g=h.getRoot(b),f=b.data.key.children,g=a?a[f]:g[f],f=a?!1:d,k=h.getRoot(b).expandTriggerFlag;h.getRoot(b).expandTriggerFlag=!1;if(g)for(var m=0,p=g.length;m<p;m++)g[m]&&l.expandCollapseSonNode(b,g[m],c,f);h.getRoot(b).expandTriggerFlag=k;l.expandCollapseNode(b,a,c,d,e)},isSelectedNode:function(b,a){if(!a)return!1;var c=h.getRoot(b).curSelectedList,d;for(d=c.length-1;0<=d;d--)if(a===c[d])return!0;return!1},makeDOMNodeIcon:function(b,a,c){var d=h.getNodeName(a,c),d=a.view.nameIsHTML?d:d.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;");b.push("\x3cspan id\x3d'",c.tId,f.id.ICON,"' title\x3d'' treeNode",f.id.ICON," class\x3d'",l.makeNodeIcoClass(a,c),"' style\x3d'",l.makeNodeIcoStyle(a,c),"'\x3e\x3c/span\x3e\x3cspan id\x3d'",c.tId,f.id.SPAN,"' class\x3d'",f.className.NAME,"'\x3e",d,"\x3c/span\x3e")},makeDOMNodeLine:function(b,a,c){b.push("\x3cspan id\x3d'",c.tId,f.id.SWITCH,"' title\x3d'' class\x3d'",l.makeNodeLineClass(a,c),"' treeNode",f.id.SWITCH,"\x3e\x3c/span\x3e")},makeDOMNodeMainAfter:function(b,a,c){b.push("\x3c/li\x3e")},makeDOMNodeMainBefore:function(b,a,c){b.push("\x3cli id\x3d'",c.tId,"' class\x3d'",f.className.LEVEL,c.level,"' tabindex\x3d'0' hidefocus\x3d'true' treenode\x3e")},makeDOMNodeNameAfter:function(b,a,c){b.push("\x3c/a\x3e")},makeDOMNodeNameBefore:function(b,a,c){var d=h.getNodeTitle(a,c),e=l.makeNodeUrl(a,c),g=l.makeNodeFontCss(a,c),n=[],m;for(m in g)n.push(m,":",g[m],";");null!=a.showMenuTarget&&!a.showMenuTarget&&c.isParent?b.push("\x3ca id\x3d'",c.tId,f.id.A,"' class\x3d'",f.className.LEVEL,c.level,"' treeNode",f.id.A,' onclick\x3d"',c.click||"",'" ',null!=e&&0<e.length?"href\x3d'"+e+"'":"","' style\x3d'",n.join(""),"'"):b.push("\x3ca id\x3d'",c.tId,f.id.A,"' class\x3d'",f.className.LEVEL,c.level,"' treeNode",f.id.A,' onclick\x3d"',c.click||"",'" ',null!=e&&0<e.length?"href\x3d'"+e+"'":""," target\x3d'",l.makeNodeTarget(c),"' style\x3d'",n.join(""),"'");c.rel&&b.push(" rel\x3d'",c.rel,"'");k.apply(a.view.showTitle,[a.treeId,c],a.view.showTitle)&&d&&b.push("title\x3d'",d.replace(/'/g,"\x26#39;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),"'");b.push("\x3e")},makeNodeFontCss:function(b,a){var c=k.apply(b.view.fontCss,[b.treeId,a],b.view.fontCss);return c&&"function"!=typeof c?c:{}},makeNodeIcoClass:function(b,a){var c=["ico"];a.isAjaxing||(c[0]=(a.iconSkin?a.iconSkin+"_":"")+c[0],a.isParent?c.push(a.open?f.folder.OPEN:f.folder.CLOSE):c.push(f.folder.DOCU));return f.className.BUTTON+" "+c.join("_")},makeNodeIcoStyle:function(b,a){var c=[];if(!a.isAjaxing){var d=a.isParent&&a.iconOpen&&a.iconClose?a.open?a.iconOpen:a.iconClose:a[b.data.key.icon];d&&c.push("background:url(",d,") 0 0 no-repeat;");0!=b.view.showIcon&&k.apply(b.view.showIcon,[b.treeId,a],!0)||c.push("width:0px;height:0px;")}return c.join("")},makeNodeLineClass:function(b,a){var c=[];b.view.showLine?0==a.level&&a.isFirstNode&&a.isLastNode?c.push(f.line.ROOT):0==a.level&&a.isFirstNode?c.push(f.line.ROOTS):a.isLastNode?c.push(f.line.BOTTOM):c.push(f.line.CENTER):c.push(f.line.NOLINE);a.isParent?c.push(a.open?f.folder.OPEN:f.folder.CLOSE):c.push(f.folder.DOCU);return l.makeNodeLineClassEx(a)+c.join("_")},makeNodeLineClassEx:function(b){return f.className.BUTTON+" "+f.className.LEVEL+b.level+" "+f.className.SWITCH+" "},makeNodeTarget:function(b){return b.target||"navTab"},makeNodeUrl:function(b,a){var c=b.data.key.url;return a[c]?a[c]:null},makeUlHtml:function(b,a,c,d){c.push("\x3cul id\x3d'",a.tId,f.id.UL,"' class\x3d'",f.className.LEVEL,a.level," ",l.makeUlLineClass(b,a),"' style\x3d'display:",a.open?"block":"none","'\x3e");c.push(d);c.push("\x3c/ul\x3e")},makeUlLineClass:function(b,a){return b.view.showLine&&!a.isLastNode?f.line.LINE:""},removeChildNodes:function(b,a){if(a){var c=b.data.key.children,d=a[c];if(d){for(var e=0,g=d.length;e<g;e++)h.removeNodeCache(b,d[e]);h.removeSelectedNode(b);delete a[c];b.data.keep.parent?m(a,f.id.UL,b).empty():(a.isParent=!1,a.open=!1,c=m(a,f.id.SWITCH,b),d=m(a,f.id.ICON,b),l.replaceSwitchClass(a,c,f.folder.DOCU),l.replaceIcoClass(a,d,f.folder.DOCU),m(a,f.id.UL,b).remove())}}},scrollIntoView:function(b){b&&(Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(a){function b(c,d,e,g){return!1===a||e<=c+g&&c<=d+g?Math.min(e,Math.max(d,c)):(d+e)/2}function d(a,b,c,e){return{left:a,top:b,width:c,height:e,right:a+c,bottom:b+e,translate:function(g,f){return d(g+a,f+b,c,e)},relativeFromTo:function(g,h){var l=a,k=b;g=g.offsetParent;h=h.offsetParent;if(g===h)return f;for(;g;g=g.offsetParent)l+=g.offsetLeft+g.clientLeft,k+=g.offsetTop+g.clientTop;for(;h;h=h.offsetParent)l-=h.offsetLeft+h.clientLeft,k-=h.offsetTop+h.clientTop;return d(l,k,c,e)}}}for(var e,g=this,f=d(this.offsetLeft,this.offsetTop,this.offsetWidth,this.offsetHeight);k.isElement(e=g.parentNode);){var h=e.offsetLeft+e.clientLeft,l=e.offsetTop+e.clientTop,f=f.relativeFromTo(g,e).translate(-h,-l);e.scrollLeft=b(e.scrollLeft,f.right-e.clientWidth,f.left,e.clientWidth);e.scrollTop=b(e.scrollTop,f.bottom-e.clientHeight,f.top,e.clientHeight);f=f.translate(h-e.scrollLeft,l-e.scrollTop);g=e}}),b.scrollIntoViewIfNeeded())},setFirstNode:function(b,a){var c=b.data.key.children;0<a[c].length&&(a[c][0].isFirstNode=!0)},setLastNode:function(b,a){var c=b.data.key.children,d=a[c].length;0<d&&(a[c][d-1].isLastNode=!0)},removeNode:function(b,a){var c=h.getRoot(b),d=b.data.key.children,e=a.parentTId?a.getParentNode():c;a.isFirstNode=!1;a.isLastNode=!1;a.getPreNode=function(){return null};a.getNextNode=function(){return null};if(h.getNodeCache(b,a.tId)){m(a,b).remove();h.removeNodeCache(b,a);h.removeSelectedNode(b,a);for(var g=0,k=e[d].length;g<k;g++)if(e[d][g].tId==a.tId){e[d].splice(g,1);break}l.setFirstNode(b,e);l.setLastNode(b,e);var t,g=e[d].length;if(!b.data.keep.parent&&0==g)e.isParent=!1,e.open=!1,g=m(e,f.id.UL,b),k=m(e,f.id.SWITCH,b),t=m(e,f.id.ICON,b),l.replaceSwitchClass(e,k,f.folder.DOCU),l.replaceIcoClass(e,t,f.folder.DOCU),g.css("display","none");else if(b.view.showLine&&0<g){var q=e[d][g-1],g=m(q,f.id.UL,b),k=m(q,f.id.SWITCH,b);t=m(q,f.id.ICON,b);e==c?1==e[d].length?l.replaceSwitchClass(q,k,f.line.ROOT):(c=m(e[d][0],f.id.SWITCH,b),l.replaceSwitchClass(e[d][0],c,f.line.ROOTS),l.replaceSwitchClass(q,k,f.line.BOTTOM)):l.replaceSwitchClass(q,k,f.line.BOTTOM);g.removeClass(f.line.LINE)}}},replaceIcoClass:function(b,a,c){if(a&&!b.isAjaxing&&(b=a.attr("class"),void 0!=b)){b=b.split("_");switch(c){case f.folder.OPEN:case f.folder.CLOSE:case f.folder.DOCU:b[b.length-1]=c}a.attr("class",b.join("_"))}},replaceSwitchClass:function(b,a,c){if(a){var d=a.attr("class");if(void 0!=d){d=d.split("_");switch(c){case f.line.ROOT:case f.line.ROOTS:case f.line.CENTER:case f.line.BOTTOM:case f.line.NOLINE:d[0]=l.makeNodeLineClassEx(b)+c;break;case f.folder.OPEN:case f.folder.CLOSE:case f.folder.DOCU:d[1]=c}a.attr("class",d.join("_"));c!==f.folder.DOCU?a.removeAttr("disabled"):a.attr("disabled","disabled")}}},selectNode:function(b,a,c){c||l.cancelPreSelectedNode(b,null,a);m(a,f.id.A,b).addClass(f.node.CURSELECTED);h.addSelectedNode(b,a);b.treeObj.trigger(f.event.SELECTED,[b.treeId,a])},setNodeFontCss:function(b,a){var c=m(a,f.id.A,b),d=l.makeNodeFontCss(b,a);d&&c.css(d)},setNodeRel:function(b,a){var c=u("#"+a.tId+f.id.A),d=treeNode.rel;null==d||0==d.length?c.removeAttr("rel"):c.attr("rel",d)},setNodeLineIcos:function(b,a){if(a){var c=m(a,f.id.SWITCH,b),d=m(a,f.id.UL,b),e=m(a,f.id.ICON,b),g=l.makeUlLineClass(b,a);0==g.length?d.removeClass(f.line.LINE):d.addClass(g);c.attr("class",l.makeNodeLineClass(b,a));a.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled");e.removeAttr("style");e.attr("style",l.makeNodeIcoStyle(b,a));e.attr("class",l.makeNodeIcoClass(b,a))}},setNodeName:function(b,a){var c=h.getNodeTitle(b,a),d=m(a,f.id.SPAN,b);d.empty();b.view.nameIsHTML?d.html(h.getNodeName(b,a)):d.text(h.getNodeName(b,a));k.apply(b.view.showTitle,[b.treeId,a],b.view.showTitle)&&m(a,f.id.A,b).attr("title",c?c:"")},setNodeTarget:function(b,a){m(a,f.id.A,b).attr("target",l.makeNodeTarget(a))},setNodeUrl:function(b,a){var c=m(a,f.id.A,b),d=l.makeNodeUrl(b,a);null==d||0==d.length?c.removeAttr("href"):c.attr("href",d)},switchNode:function(b,a){a.open||!k.canAsync(b,a)?l.expandCollapseNode(b,a,!a.open):b.async.enable?l.asyncNode(b,a)||l.expandCollapseNode(b,a,!a.open):a&&l.expandCollapseNode(b,a,!a.open)}};u.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:k,view:l,event:p,data:h},getZTreeObj:function(b){return(b=h.getZTreeTools(b))?b:null},destroy:function(b){if(b&&0<b.length)l.destroy(h.getSetting(b));else for(var a in x)l.destroy(x[a])},init:function(b,a,c){var d=k.clone(N);u.extend(!0,d,a);d.treeId=b.attr("id");d.treeObj=b;d.treeObj.empty();x[d.treeId]=d;"undefined"===typeof document.body.style.maxHeight&&(d.view.expandSpeed="");h.initRoot(d);b=h.getRoot(d);a=d.data.key.children;c=c?k.clone(k.isArray(c)?c:[c]):[];b[a]=d.data.simpleData.enable?h.transformTozTreeFormat(d,c):c;h.initCache(d);p.unbindTree(d);p.bindTree(d);p.unbindEvent(d);p.bindEvent(d);c={setting:d,addNodes:function(a,b,c,f){function h(){l.addNodes(d,a,b,p,1==f)}a||(a=null);if(a&&!a.isParent&&d.data.keep.leaf)return null;var m=parseInt(b,10);isNaN(m)?(f=!!c,c=b,b=-1):b=m;if(!c)return null;var p=k.clone(k.isArray(c)?c:[c]);k.canAsync(d,a)?l.asyncNode(d,a,f,h):h();return p},cancelSelectedNode:function(a){l.cancelPreSelectedNode(d,a)},destroy:function(){l.destroy(d)},expandAll:function(a){a=!!a;l.expandCollapseSonNode(d,null,a,!0);return a},expandNode:function(a,b,c,f,q){function p(){var b=m(a,d).get(0);b&&!1!==f&&l.scrollIntoView(b)}if(!a||!a.isParent)return null;!0!==b&&!1!==b&&(b=!a.open);if((q=!!q)&&b&&0==k.apply(d.callback.beforeExpand,[d.treeId,a],!0)||q&&!b&&0==k.apply(d.callback.beforeCollapse,[d.treeId,a],!0))return null;b&&a.parentTId&&l.expandCollapseParentNode(d,a.getParentNode(),b,!1);if(b===a.open&&!c)return null;h.getRoot(d).expandTriggerFlag=q;!k.canAsync(d,a)&&c?l.expandCollapseSonNode(d,a,b,!0,p):(a.open=!b,l.switchNode(this.setting,a),p());return b},getNodes:function(){return h.getNodes(d)},getNodeByParam:function(a,b,c){return a?h.getNodeByParam(d,c?c[d.data.key.children]:h.getNodes(d),a,b):null},getNodeByTId:function(a){return h.getNodeCache(d,a)},getNodesByParam:function(a,b,c){return a?h.getNodesByParam(d,c?c[d.data.key.children]:h.getNodes(d),a,b):null},getNodesByParamFuzzy:function(a,b,c){return a?h.getNodesByParamFuzzy(d,c?c[d.data.key.children]:h.getNodes(d),a,b):null},getNodesByFilter:function(a,b,c,f){b=!!b;return a&&"function"==typeof a?h.getNodesByFilter(d,c?c[d.data.key.children]:h.getNodes(d),a,b,f):b?null:[]},getNodeIndex:function(a){if(!a)return null;for(var b=d.data.key.children,c=a.parentTId?a.getParentNode():h.getRoot(d),f=0,l=c[b].length;f<l;f++)if(c[b][f]==a)return f;return-1},getSelectedNodes:function(){for(var a=[],b=h.getRoot(d).curSelectedList,c=0,f=b.length;c<f;c++)a.push(b[c]);return a},isSelectedNode:function(a){return h.isSelectedNode(d,a)},reAsyncChildNodes:function(a,b,c){if(this.setting.async.enable){var k=!a;k&&(a=h.getRoot(d));if("refresh"==b){b=this.setting.data.key.children;for(var p=0,u=a[b]?a[b].length:0;p<u;p++)h.removeNodeCache(d,a[b][p]);h.removeSelectedNode(d);a[b]=[];k?this.setting.treeObj.empty():m(a,f.id.UL,d).empty()}l.asyncNode(this.setting,k?null:a,!!c)}},refresh:function(){this.setting.treeObj.empty();var a=h.getRoot(d),b=a[d.data.key.children];h.initRoot(d);a[d.data.key.children]=b;h.initCache(d);l.createNodes(d,0,a[d.data.key.children],null,-1)},removeChildNodes:function(a){if(!a)return null;var b=a[d.data.key.children];l.removeChildNodes(d,a);return b?b:null},removeNode:function(a,b){a&&(b=!!b,b&&0==k.apply(d.callback.beforeRemove,[d.treeId,a],!0)||(l.removeNode(d,a),b&&this.setting.treeObj.trigger(f.event.REMOVE,[d.treeId,a])))},selectNode:function(a,b,c){function f(){if(!c){var b=m(a,d).get(0);l.scrollIntoView(b)}}if(a&&k.uCanDo(d)){b=d.view.selectedMulti&&b;if(a.parentTId)l.expandCollapseParentNode(d,a.getParentNode(),!0,!1,f);else if(!c)try{m(a,d).focus().blur()}catch(h){}l.selectNode(d,a,b)}},transformTozTreeNodes:function(a){return h.transformTozTreeFormat(d,a)},transformToArray:function(a){return h.transformToArrayFormat(d,a)},updateNode:function(a,b){a&&m(a,d).get(0)&&k.uCanDo(d)&&(l.setNodeName(d,a),l.setNodeTarget(d,a),l.setNodeUrl(d,a),l.setNodeLineIcos(d,a),l.setNodeFontCss(d,a),l.setNodeRel(d,a))}};b.treeTools=c;h.setZTreeTools(d,c);b[a]&&0<b[a].length?l.createNodes(d,0,b[a],null,-1):d.async.enable&&d.async.url&&""!==d.async.url&&l.asyncNode(d);return c}};var O=u.fn.zTree,m=k.$,f=O.consts})(jQuery);