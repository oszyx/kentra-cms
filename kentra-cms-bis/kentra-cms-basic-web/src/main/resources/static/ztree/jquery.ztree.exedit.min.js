/*
 * JQuery zTree exedit v3.5.28
 * http://treejs.cn/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * email: hunter.z@263.net
 * Date: 2017-01-20
 */(function(A){var M={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},y={onHoverOverNode:function(a,b){var c=p.getSetting(a.data.treeId),d=p.getRoot(c);if(d.curHoverNode!=b)y.onHoverOutNode(a);d.curHoverNode=b;f.addHoverDom(c,b)},onHoverOutNode:function(a,b){var c=p.getSetting(a.data.treeId),d=p.getRoot(c);d.curHoverNode&&!p.isSelectedNode(c,d.curHoverNode)&&(f.removeTreeDom(c,d.curHoverNode),d.curHoverNode=null)},onMousedownNode:function(a,b){function c(a){if(0==F.dragFlag&&Math.abs(R-a.clientX)<e.edit.drag.minMoveSize&&Math.abs(S-a.clientY)<e.edit.drag.minMoveSize)return!0;var b,c,g,m,l;l=e.data.key.children;P.css("cursor","pointer");if(0==F.dragFlag){if(0==h.apply(e.callback.beforeDrag,[e.treeId,n],!0))return u(a),!0;b=0;for(c=n.length;b<c;b++)0==b&&(F.dragNodeShowBefore=[]),g=n[b],g.isParent&&g.open?(f.expandCollapseNode(e,g,!g.open),F.dragNodeShowBefore[g.tId]=!0):F.dragNodeShowBefore[g.tId]=!1;F.dragFlag=1;x.showHoverDom=!1;h.showIfameMask(e,!0);g=!0;m=-1;if(1<n.length){var w=n[0].parentTId?n[0].getParentNode()[l]:p.getNodes(e);l=[];b=0;for(c=w.length;b<c;b++)if(void 0!==F.dragNodeShowBefore[w[b].tId]&&(g&&-1<m&&m+1!==b&&(g=!1),l.push(w[b]),m=b),n.length===l.length){n=l;break}}g&&(L=n[0].getPreNode(),U=n[n.length-1].getNextNode());G=q("\x3cul class\x3d'zTreeDragUL'\x3e\x3c/ul\x3e",e);b=0;for(c=n.length;b<c;b++)g=n[b],g.editNameFlag=!1,f.selectNode(e,g,0<b),f.removeTreeDom(e,g),b>e.edit.drag.maxShowNodeNum-1||(m=q("\x3cli id\x3d'"+g.tId+"_tmp'\x3e\x3c/li\x3e",e),m.append(q(g,d.id.A,e).clone()),m.css("padding","0"),m.children("#"+g.tId+d.id.A).removeClass(d.node.CURSELECTED),G.append(m),b==e.edit.drag.maxShowNodeNum-1&&(m=q("\x3cli id\x3d'"+g.tId+"_moretmp'\x3e\x3ca\x3e  ...  \x3c/a\x3e\x3c/li\x3e",e),G.append(m)));G.attr("id",n[0].tId+d.id.UL+"_tmp");G.addClass(e.treeObj.attr("class"));G.appendTo(P);E=q("\x3cspan class\x3d'tmpzTreeMove_arrow'\x3e\x3c/span\x3e",e);E.attr("id","zTreeMove_arrow_tmp");E.appendTo(P);e.treeObj.trigger(d.event.DRAG,[a,e.treeId,n])}if(1==F.dragFlag){v&&E.attr("id")==a.target.id&&z&&a.clientX+J.scrollLeft()+2>A("#"+z+d.id.A,v).offset().left?(g=A("#"+z+d.id.A,v),a.target=0<g.length?g.get(0):a.target):v&&(v.removeClass(d.node.TMPTARGET_TREE),z&&A("#"+z+d.id.A,v).removeClass(d.node.TMPTARGET_NODE+"_"+d.move.TYPE_PREV).removeClass(d.node.TMPTARGET_NODE+"_"+M.move.TYPE_NEXT).removeClass(d.node.TMPTARGET_NODE+"_"+M.move.TYPE_INNER));z=v=null;N=!1;k=e;g=p.getSettings();for(var C in g)g[C].treeId&&g[C].edit.enable&&g[C].treeId!=e.treeId&&(a.target.id==g[C].treeId||0<A(a.target).parents("#"+g[C].treeId).length)&&(N=!0,k=g[C]);C=J.scrollTop();m=J.scrollLeft();l=k.treeObj.offset();b=k.treeObj.get(0).scrollHeight;g=k.treeObj.get(0).scrollWidth;c=a.clientY+C-l.top;var r=k.treeObj.height()+l.top-a.clientY-C,t=a.clientX+m-l.left,K=k.treeObj.width()+l.left-a.clientX-m;l=c<e.edit.drag.borderMax&&c>e.edit.drag.borderMin;var w=r<e.edit.drag.borderMax&&r>e.edit.drag.borderMin,I=t<e.edit.drag.borderMax&&t>e.edit.drag.borderMin,y=K<e.edit.drag.borderMax&&K>e.edit.drag.borderMin,r=c>e.edit.drag.borderMin&&r>e.edit.drag.borderMin&&t>e.edit.drag.borderMin&&K>e.edit.drag.borderMin,t=l&&0>=k.treeObj.scrollTop(),K=w&&k.treeObj.scrollTop()+k.treeObj.height()+10>=b,Q=I&&0>=k.treeObj.scrollLeft(),T=y&&k.treeObj.scrollLeft()+k.treeObj.width()+10>=g;if(a.target&&h.isChildOrSelf(a.target,k.treeId)){for(var H=a.target;H&&H.tagName&&!h.eqs(H.tagName,"li")&&H.id!=k.treeId;)H=H.parentNode;var V=!0;b=0;for(c=n.length;b<c;b++)if(g=n[b],H.id===g.tId){V=!1;break}else if(0<q(g,e).find("#"+H.id).length){V=!1;break}V&&a.target&&h.isChildOrSelf(a.target,H.id+d.id.A)&&(v=A(H),z=H.id)}g=n[0];r&&h.isChildOrSelf(a.target,k.treeId)&&(!v&&(a.target.id==k.treeId||t||K||Q||T)&&(N||!N&&g.parentTId)&&(v=k.treeObj),l?k.treeObj.scrollTop(k.treeObj.scrollTop()-10):w&&k.treeObj.scrollTop(k.treeObj.scrollTop()+10),I?k.treeObj.scrollLeft(k.treeObj.scrollLeft()-10):y&&k.treeObj.scrollLeft(k.treeObj.scrollLeft()+10),v&&v!=k.treeObj&&v.offset().left<k.treeObj.offset().left&&k.treeObj.scrollLeft(k.treeObj.scrollLeft()+v.offset().left-k.treeObj.offset().left));G.css({top:a.clientY+C+3+"px",left:a.clientX+m+3+"px"});c=b=0;if(v&&v.attr("id")!=k.treeId){m=function(){v=null;z="";B=d.move.TYPE_INNER;E.css({display:"none"});window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)};var D=null==z?null:p.getNodeCache(k,z),w=(a.ctrlKey||a.metaKey)&&e.edit.drag.isMove&&e.edit.drag.isCopy||!e.edit.drag.isMove&&e.edit.drag.isCopy;l=!(!L||z!==L.tId);y=!(!U||z!==U.tId);I=g.parentTId&&g.parentTId==z;g=(w||!y)&&h.apply(k.edit.drag.prev,[k.treeId,n,D],!!k.edit.drag.prev);l=(w||!l)&&h.apply(k.edit.drag.next,[k.treeId,n,D],!!k.edit.drag.next);w=(w||!I)&&!(k.data.keep.leaf&&!D.isParent)&&h.apply(k.edit.drag.inner,[k.treeId,n,D],!!k.edit.drag.inner);if(g||l||w){if(I=A("#"+z+d.id.A,v),y=D.isLastNode?null:A("#"+D.getNextNode().tId+d.id.A,v.next()),r=I.offset().top,t=I.offset().left,K=g?w?.25:l?.5:1:-1,Q=l?w?.75:g?.5:0:-1,C=(a.clientY+C-r)/I.height(),(1==K||C<=K&&-.2<=C)&&g?(b=1-E.width(),c=r-E.height()/2,B=d.move.TYPE_PREV):(0==Q||C>=Q&&1.2>=C)&&l?(b=1-E.width(),c=null==y||D.isParent&&D.open?r+I.height()-E.height()/2:y.offset().top-E.height()/2,B=d.move.TYPE_NEXT):w?(b=5-E.width(),c=r,B=d.move.TYPE_INNER):m(),v){E.css({display:"block",top:c+"px",left:t+b+"px"});I.addClass(d.node.TMPTARGET_NODE+"_"+B);if(W!=z||X!=B)O=(new Date).getTime();D&&D.isParent&&B==d.move.TYPE_INNER&&(C=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==D.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===D.tId&&(C=!1),C&&(window.zTreeMoveTimer=setTimeout(function(){B==d.move.TYPE_INNER&&D&&D.isParent&&!D.open&&(new Date).getTime()-O>k.edit.drag.autoOpenTime&&h.apply(k.callback.beforeDragOpen,[k.treeId,D],!0)&&(f.switchNode(k,D),k.edit.drag.autoExpandTrigger&&k.treeObj.trigger(d.event.EXPAND,[k.treeId,D]))},k.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=D.tId))}}else m()}else B=d.move.TYPE_INNER,v&&h.apply(k.edit.drag.inner,[k.treeId,n,null],!!k.edit.drag.inner)?v.addClass(d.node.TMPTARGET_TREE):v=null,E.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);W=z;X=B;e.treeObj.trigger(d.event.DRAGMOVE,[a,e.treeId,n])}return!1}function u(a){window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);X=W=null;J.unbind("mousemove",c);J.unbind("mouseup",u);J.unbind("selectstart",g);P.css("cursor","auto");v&&(v.removeClass(d.node.TMPTARGET_TREE),z&&A("#"+z+d.id.A,v).removeClass(d.node.TMPTARGET_NODE+"_"+d.move.TYPE_PREV).removeClass(d.node.TMPTARGET_NODE+"_"+M.move.TYPE_NEXT).removeClass(d.node.TMPTARGET_NODE+"_"+M.move.TYPE_INNER));h.showIfameMask(e,!1);x.showHoverDom=!0;if(0!=F.dragFlag){F.dragFlag=0;var b,m,l;b=0;for(m=n.length;b<m;b++)l=n[b],l.isParent&&F.dragNodeShowBefore[l.tId]&&!l.open&&(f.expandCollapseNode(e,l,!l.open),delete F.dragNodeShowBefore[l.tId]);G&&G.remove();E&&E.remove();var r=(a.ctrlKey||a.metaKey)&&e.edit.drag.isMove&&e.edit.drag.isCopy||!e.edit.drag.isMove&&e.edit.drag.isCopy;!r&&v&&z&&n[0].parentTId&&z==n[0].parentTId&&B==d.move.TYPE_INNER&&(v=null);if(v){b=function(){if(N){if(!r)for(var b=0,c=n.length;b<c;b++)f.removeNode(e,n[b]);B==d.move.TYPE_INNER?f.addNodes(k,t,-1,w):f.addNodes(k,t.getParentNode(),B==d.move.TYPE_PREV?t.getIndex():t.getIndex()+1,w)}else if(r&&B==d.move.TYPE_INNER)f.addNodes(k,t,-1,w);else if(r)f.addNodes(k,t.getParentNode(),B==d.move.TYPE_PREV?t.getIndex():t.getIndex()+1,w);else if(B!=d.move.TYPE_NEXT)for(b=0,c=w.length;b<c;b++)f.moveNode(k,t,w[b],B,!1);else for(b=-1,c=w.length-1;b<c;c--)f.moveNode(k,t,w[c],B,!1);f.selectNodes(k,w);b=q(w[0],e).get(0);f.scrollIntoView(b);e.treeObj.trigger(d.event.DROP,[a,k.treeId,w,t,B,r])};var t=null==z?null:p.getNodeCache(k,z);if(0==h.apply(e.callback.beforeDrop,[k.treeId,n,t,B,r],!0))f.selectNodes(y,n);else{var w=r?h.clone(n):n;B==d.move.TYPE_INNER&&h.canAsync(k,t)?f.asyncNode(k,t,!1,b):b()}}else f.selectNodes(y,n),e.treeObj.trigger(d.event.DROP,[a,e.treeId,n,null,null,null])}}function g(){return!1}var m,l,e=p.getSetting(a.data.treeId),F=p.getRoot(e),x=p.getRoots();if(2==a.button||!e.edit.enable||!e.edit.drag.isCopy&&!e.edit.drag.isMove)return!0;var r=a.target,t=p.getRoot(e).curSelectedList,n=[];if(p.isSelectedNode(e,b))for(m=0,l=t.length;m<l;m++){if(t[m].editNameFlag&&h.eqs(r.tagName,"input")&&null!==r.getAttribute("treeNode"+d.id.INPUT))return!0;n.push(t[m]);if(n[0].parentTId!==t[m].parentTId){n=[b];break}}else n=[b];f.editNodeBlur=!0;f.cancelCurEditNode(e);var J=A(e.treeObj.get(0).ownerDocument),P=A(e.treeObj.get(0).ownerDocument.body),G,E,v,N=!1,k=e,y=e,L,U,W=null,X=null,z=null,B=d.move.TYPE_INNER,R=a.clientX,S=a.clientY,O=(new Date).getTime();h.uCanDo(e)&&J.bind("mousemove",c);J.bind("mouseup",u);J.bind("selectstart",g);a.preventDefault&&a.preventDefault();return!0}};A.extend(!0,A.fn.zTree.consts,M);A.extend(!0,A.fn.zTree._z,{tools:{getAbs:function(a){a=a.getBoundingClientRect();return[a.left+(document.body.scrollLeft+document.documentElement.scrollLeft),a.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(a){a.get(0)&&(a.focus(),h.setCursorPosition(a.get(0),a.val().length))},inputSelect:function(a){a.get(0)&&(a.focus(),a.select())},setCursorPosition:function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",b);c.select()}},showIfameMask:function(a,b){for(var c=p.getRoot(a);0<c.dragMaskList.length;)c.dragMaskList[0].remove(),c.dragMaskList.shift();if(b)for(var d=q("iframe",a),g=0,f=d.length;g<f;g++){var l=d.get(g),e=h.getAbs(l),l=q("\x3cdiv id\x3d'zTreeMask_"+g+"' class\x3d'zTreeMask' style\x3d'top:"+e[1]+"px; left:"+e[0]+"px; width:"+l.offsetWidth+"px; height:"+l.offsetHeight+"px;'\x3e\x3c/div\x3e",a);l.appendTo(q("body",a));c.dragMaskList.push(l)}}},view:{addEditBtn:function(a,b){if(!(b.editNameFlag||0<q(b,d.id.EDIT,a).length)&&h.apply(a.edit.showRenameBtn,[a.treeId,b],a.edit.showRenameBtn)){var c=q(b,d.id.A,a),u="\x3cspan class\x3d'"+d.className.BUTTON+" edit' id\x3d'"+b.tId+d.id.EDIT+"' title\x3d'"+h.apply(a.edit.renameTitle,[a.treeId,b],a.edit.renameTitle)+"' treeNode"+d.id.EDIT+" style\x3d'display:none;'\x3e\x3c/span\x3e";c.append(u);q(b,d.id.EDIT,a).bind("click",function(){if(!h.uCanDo(a)||0==h.apply(a.callback.beforeEditName,[a.treeId,b],!0))return!1;f.editNode(a,b);return!1}).show()}},addRemoveBtn:function(a,b){if(!(b.editNameFlag||0<q(b,d.id.REMOVE,a).length)&&h.apply(a.edit.showRemoveBtn,[a.treeId,b],a.edit.showRemoveBtn)){var c=q(b,d.id.A,a),u="\x3cspan class\x3d'"+d.className.BUTTON+" remove' id\x3d'"+b.tId+d.id.REMOVE+"' title\x3d'"+h.apply(a.edit.removeTitle,[a.treeId,b],a.edit.removeTitle)+"' treeNode"+d.id.REMOVE+" style\x3d'display:none;'\x3e\x3c/span\x3e";c.append(u);q(b,d.id.REMOVE,a).bind("click",function(){if(!h.uCanDo(a)||0==h.apply(a.callback.beforeRemove,[a.treeId,b],!0))return!1;f.removeNode(a,b);a.treeObj.trigger(d.event.REMOVE,[a.treeId,b]);return!1}).bind("mousedown",function(a){return!0}).show()}},addHoverDom:function(a,b){p.getRoots().showHoverDom&&(b.isHover=!0,a.edit.enable&&(f.addEditBtn(a,b),f.addRemoveBtn(a,b)),h.apply(a.view.addHoverDom,[a.treeId,b]))},cancelCurEditNode:function(a,b,c){var u=p.getRoot(a),g=a.data.key.name,m=u.curEditNode;if(m){var l=u.curEditInput;b=b?b:c?m[g]:l.val();if(!1===h.apply(a.callback.beforeRename,[a.treeId,m,b,c],!0))return!1;m[g]=b;q(m,d.id.A,a).removeClass(d.node.CURSELECTED_EDIT);l.unbind();f.setNodeName(a,m);m.editNameFlag=!1;u.curEditNode=null;u.curEditInput=null;f.selectNode(a,m,!1);a.treeObj.trigger(d.event.RENAME,[a.treeId,m,c])}return u.noSelection=!0},editNode:function(a,b){var c=p.getRoot(a);f.editNodeBlur=!1;if(p.isSelectedNode(a,b)&&c.curEditNode==b&&b.editNameFlag)setTimeout(function(){h.inputFocus(c.curEditInput)},0);else{var u=a.data.key.name;b.editNameFlag=!0;f.removeTreeDom(a,b);f.cancelCurEditNode(a);f.selectNode(a,b,!1);q(b,d.id.SPAN,a).html("\x3cinput type\x3dtext class\x3d'rename' id\x3d'"+b.tId+d.id.INPUT+"' treeNode"+d.id.INPUT+" \x3e");var g=q(b,d.id.INPUT,a);g.attr("value",b[u]);a.edit.editNameSelectAll?h.inputSelect(g):h.inputFocus(g);g.bind("blur",function(b){f.editNodeBlur||f.cancelCurEditNode(a)}).bind("keydown",function(b){"13"==b.keyCode?(f.editNodeBlur=!0,f.cancelCurEditNode(a)):"27"==b.keyCode&&f.cancelCurEditNode(a,null,!0)}).bind("click",function(a){return!1}).bind("dblclick",function(a){return!1});q(b,d.id.A,a).addClass(d.node.CURSELECTED_EDIT);c.curEditInput=g;c.noSelection=!1;c.curEditNode=b}},moveNode:function(a,b,c,u,g,m){var l=p.getRoot(a),e=a.data.key.children;if(b!=c&&(!a.data.keep.leaf||!b||b.isParent||u!=d.move.TYPE_INNER)){var h=c.parentTId?c.getParentNode():l,x=null===b||b==l;x&&null===b&&(b=l);x&&(u=d.move.TYPE_INNER);l=b.parentTId?b.getParentNode():l;u!=d.move.TYPE_PREV&&u!=d.move.TYPE_NEXT&&(u=d.move.TYPE_INNER);u==d.move.TYPE_INNER&&(x?c.parentTId=null:(b.isParent||(b.isParent=!0,b.open=!!b.open,f.setNodeLineIcos(a,b)),c.parentTId=b.tId));var r;x?r=x=a.treeObj:(m||u!=d.move.TYPE_INNER?m||f.expandCollapseNode(a,b.getParentNode(),!0,!1):f.expandCollapseNode(a,b,!0,!1),x=q(b,a),r=q(b,d.id.UL,a),x.get(0)&&!r.get(0)&&(r=[],f.makeUlHtml(a,b,r,""),x.append(r.join(""))),r=q(b,d.id.UL,a));var t=q(c,a);t.get(0)?x.get(0)||t.remove():t=f.appendNodes(a,c.level,[c],null,-1,!1,!0).join("");r.get(0)&&u==d.move.TYPE_INNER?r.append(t):x.get(0)&&u==d.move.TYPE_PREV?x.before(t):x.get(0)&&u==d.move.TYPE_NEXT&&x.after(t);var n=-1,A=0,y=null,x=null,G=c.level;if(c.isFirstNode)n=0,1<h[e].length&&(y=h[e][1],y.isFirstNode=!0);else if(c.isLastNode)n=h[e].length-1,y=h[e][n-1],y.isLastNode=!0;else for(r=0,t=h[e].length;r<t;r++)if(h[e][r].tId==c.tId){n=r;break}0<=n&&h[e].splice(n,1);if(u!=d.move.TYPE_INNER)for(r=0,t=l[e].length;r<t;r++)l[e][r].tId==b.tId&&(A=r);u==d.move.TYPE_INNER?(b[e]||(b[e]=[]),0<b[e].length&&(x=b[e][b[e].length-1],x.isLastNode=!1),b[e].splice(b[e].length,0,c),c.isLastNode=!0,c.isFirstNode=1==b[e].length):b.isFirstNode&&u==d.move.TYPE_PREV?(l[e].splice(A,0,c),x=b,x.isFirstNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!0,c.isLastNode=!1):b.isLastNode&&u==d.move.TYPE_NEXT?(l[e].splice(A+1,0,c),x=b,x.isLastNode=!1,c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!0):(u==d.move.TYPE_PREV?l[e].splice(A,0,c):l[e].splice(A+1,0,c),c.parentTId=b.parentTId,c.isFirstNode=!1,c.isLastNode=!1);p.fixPIdKeyValue(a,c);p.setSonNodeLevel(a,c.getParentNode(),c);f.setNodeLineIcos(a,c);f.repairNodeLevelClass(a,c,G);!a.data.keep.parent&&1>h[e].length?(h.isParent=!1,h.open=!1,b=q(h,d.id.UL,a),u=q(h,d.id.SWITCH,a),e=q(h,d.id.ICON,a),f.replaceSwitchClass(h,u,d.folder.DOCU),f.replaceIcoClass(h,e,d.folder.DOCU),b.css("display","none")):y&&f.setNodeLineIcos(a,y);x&&f.setNodeLineIcos(a,x);a.check&&a.check.enable&&f.repairChkClass&&(f.repairChkClass(a,h),f.repairParentChkClassWithSelf(a,h),h!=c.parent&&f.repairParentChkClassWithSelf(a,c));m||f.expandCollapseParentNode(a,c.getParentNode(),!0,g)}},removeEditBtn:function(a,b){q(b,d.id.EDIT,a).unbind().remove()},removeRemoveBtn:function(a,b){q(b,d.id.REMOVE,a).unbind().remove()},removeTreeDom:function(a,b){b.isHover=!1;f.removeEditBtn(a,b);f.removeRemoveBtn(a,b);h.apply(a.view.removeHoverDom,[a.treeId,b])},repairNodeLevelClass:function(a,b,c){if(c!==b.level){var f=q(b,a),g=q(b,d.id.A,a);a=q(b,d.id.UL,a);c=d.className.LEVEL+c;b=d.className.LEVEL+b.level;f.removeClass(c);f.addClass(b);g.removeClass(c);g.addClass(b);a.removeClass(c);a.addClass(b)}},selectNodes:function(a,b){for(var c=0,d=b.length;c<d;c++)f.selectNode(a,b[c],0<c)}},event:{},data:{setSonNodeLevel:function(a,b,c){if(c){var d=a.data.key.children;c.level=b?b.level+1:0;if(c[d]){b=0;for(var g=c[d].length;b<g;b++)c[d][b]&&p.setSonNodeLevel(a,c,c[d][b])}}}}});var L=A.fn.zTree,h=L._z.tools,d=L.consts,f=L._z.view,p=L._z.data,q=h.$;p.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}});p.addInitBind(function(a){var b=a.treeObj,c=d.event;b.bind(c.RENAME,function(b,c,d,f){h.apply(a.callback.onRename,[b,c,d,f])});b.bind(c.DRAG,function(b,c,d,f){h.apply(a.callback.onDrag,[c,d,f])});b.bind(c.DRAGMOVE,function(b,c,d,f){h.apply(a.callback.onDragMove,[c,d,f])});b.bind(c.DROP,function(b,c,d,f,e,p,q){h.apply(a.callback.onDrop,[c,d,f,e,p,q])})});p.addInitUnBind(function(a){a=a.treeObj;var b=d.event;a.unbind(b.RENAME);a.unbind(b.DRAG);a.unbind(b.DRAGMOVE);a.unbind(b.DROP)});p.addInitCache(function(a){});p.addInitNode(function(a,b,c,d,f,h,l){c&&(c.isHover=!1,c.editNameFlag=!1)});p.addInitProxy(function(a){var b=a.target,c=p.getSetting(a.data.treeId),f=a.relatedTarget,g="",m=null,l="",e=null,q=null;if(h.eqs(a.type,"mouseover")){if(q=h.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+d.id.A}]))g=h.getNodeMainDom(q).id,l="hoverOverNode"}else h.eqs(a.type,"mouseout")?(q=h.getMDom(c,f,[{tagName:"a",attrName:"treeNode"+d.id.A}]),q||(g="remove",l="hoverOutNode")):h.eqs(a.type,"mousedown")&&(q=h.getMDom(c,b,[{tagName:"a",attrName:"treeNode"+d.id.A}]))&&(g=h.getNodeMainDom(q).id,l="mousedownNode");if(0<g.length)switch(m=p.getNodeCache(c,g),l){case "mousedownNode":e=y.onMousedownNode;break;case "hoverOverNode":e=y.onHoverOverNode;break;case "hoverOutNode":e=y.onHoverOutNode}return{stop:!1,node:m,nodeEventType:l,nodeEventCallback:e,treeEventType:"",treeEventCallback:null}});p.addInitRoot(function(a){a=p.getRoot(a);var b=p.getRoots();a.curEditNode=null;a.curEditInput=null;a.curHoverNode=null;a.dragFlag=0;a.dragNodeShowBefore=[];a.dragMaskList=[];b.showHoverDom=!0});p.addZTreeTools(function(a,b){b.cancelEditName=function(a){p.getRoot(this.setting).curEditNode&&f.cancelCurEditNode(this.setting,a?a:null,!0)};b.copyNode=function(a,b,g,m){if(!b||a&&!a.isParent&&this.setting.data.keep.leaf&&g===d.move.TYPE_INNER)return null;var l=this,e=h.clone(b);a||(a=null,g=d.move.TYPE_INNER);g==d.move.TYPE_INNER?(b=function(){f.addNodes(l.setting,a,-1,[e],m)},h.canAsync(this.setting,a)?f.asyncNode(this.setting,a,m,b):b()):(f.addNodes(this.setting,a.parentNode,-1,[e],m),f.moveNode(this.setting,a,e,g,!1,m));return e};b.editName=function(a){a&&a.tId&&a===p.getNodeCache(this.setting,a.tId)&&(a.parentTId&&f.expandCollapseParentNode(this.setting,a.getParentNode(),!0),f.editNode(this.setting,a))};b.moveNode=function(a,b,g,m){function l(){f.moveNode(e.setting,a,b,g,!1,m)}if(!b)return b;if(a&&!a.isParent&&this.setting.data.keep.leaf&&g===d.move.TYPE_INNER||a&&(b.parentTId==a.tId&&g==d.move.TYPE_INNER||0<q(b,this.setting).find("#"+a.tId).length))return null;a||(a=null);var e=this;h.canAsync(this.setting,a)&&g===d.move.TYPE_INNER?f.asyncNode(this.setting,a,m,l):l();return b};b.setEditable=function(a){this.setting.edit.enable=a;return this.refresh()}});var R=f.cancelPreSelectedNode;f.cancelPreSelectedNode=function(a,b){for(var c=p.getRoot(a).curSelectedList,d=0,g=c.length;d<g;d++)if(!b||b===c[d])if(f.removeTreeDom(a,c[d]),b)break;R&&R.apply(f,arguments)};var S=f.createNodes;f.createNodes=function(a,b,c,d,g){S&&S.apply(f,arguments);c&&f.repairParentChkClassWithSelf&&f.repairParentChkClassWithSelf(a,d)};var Z=f.makeNodeUrl;f.makeNodeUrl=function(a,b){return a.edit.enable?null:Z.apply(f,arguments)};var O=f.removeNode;f.removeNode=function(a,b){var c=p.getRoot(a);c.curEditNode===b&&(c.curEditNode=null);O&&O.apply(f,arguments)};var T=f.selectNode;f.selectNode=function(a,b,c){var d=p.getRoot(a);if(p.isSelectedNode(a,b)&&d.curEditNode==b&&b.editNameFlag)return!1;T&&T.apply(f,arguments);f.addHoverDom(a,b);return!0};var Y=h.uCanDo;h.uCanDo=function(a,b){var c=p.getRoot(a);if(b&&(h.eqs(b.type,"mouseover")||h.eqs(b.type,"mouseout")||h.eqs(b.type,"mousedown")||h.eqs(b.type,"mouseup")))return!0;c.curEditNode&&(f.editNodeBlur=!1,c.curEditInput.focus());return!c.curEditNode&&(Y?Y.apply(f,arguments):!0)}})(jQuery);